<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ</title>
<meta property="og:title" content="ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ">
<meta property="og:description" content="3í•™ë…„ 17ë°˜ ì¹œêµ¬ë“¤ì˜ ê³ ë¯¼ì„ í•´ê²°í•´ ë“œë¦½ë‹ˆë‹¤!">
<meta property="og:image" content="cover.png"> <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
<style>
/* 1. ì „ì²´ ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  font-family: 'Gamja Flower', cursive;
  background-color: #fff9c4;
  background-image: radial-gradient(#ddd 1px, transparent 1px);
  background-size: 20px 20px;
  display: flex;
  justify-content: center;
  color: #333;
}
.wrap {
  max-width: 400px;
  width: 100%;
  padding: 30px;
  text-align: center;
  box-sizing: border-box;
  padding-bottom: 80px;
}

/* â˜… í‘œì§€ ì´ë¯¸ì§€ â˜… */
.cover-img {
  width: 100%;              
  margin-bottom: 10px;
  border: none;
  border-radius: 0;
  box-shadow: none;
  animation: characterGlow 3s ease-in-out infinite;
}

@keyframes characterGlow {
  0%, 100% {
    transform: translateY(0px);
    filter: drop-shadow(0 0 5px rgba(138, 43, 226, 0.3));
  }
  50% {
    transform: translateY(-15px); 
    filter: drop-shadow(0 0 10px rgba(138, 43, 226, 0.8)) 
            drop-shadow(0 0 30px rgba(138, 43, 226, 0.6));
  }
}

h1 {
  font-size: 32px;
  margin-top: 10px;        
  text-shadow: 2px 2px 0px #fff;
}
p {
  font-size: 20px;
  margin: 10px 0 30px;
}

/* 2. ì…ë ¥ì°½ & ë²„íŠ¼ */
textarea {
  width: 100%;
  height: 140px;
  border: 3px solid #000;
  border-radius: 15px;
  padding: 15px;
  font-size: 20px;
  font-family: 'Gamja Flower', cursive;
  resize: none;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
  outline: none;
  box-sizing: border-box;
}
textarea:focus {
  background-color: #fff;
  box-shadow: 5px 5px 0px #ff6b6b;
}
button {
  margin-top: 25px;
  width: 100%;
  padding: 15px;
  font-size: 24px;
  font-family: 'Gamja Flower', cursive;
  border: 3px solid #000;
  border-radius: 50px;
  background: #ff6b6b;
  color: #fff;
  cursor: pointer;
  box-shadow: 4px 4px 0px #000;
  transition: 0.1s;
}
button:active {
  transform: translate(4px, 4px);
  box-shadow: 0px 0px 0px #000;
}
button:disabled {
  background: #ccc;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.small {
  margin-top: 20px;
  font-size: 16px;
  color: #777;
}

/* 3. ê³µí†µ ì„¹ì…˜ ì œëª© */
.section-title {
  font-family: 'Gamja Flower', cursive;
  font-size: 24px;
  color: #555;
  margin-bottom: 15px;
  background: #fff;
  display: inline-block;
  padding: 5px 15px;
  border-radius: 20px;
  border: 2px solid #ddd;
}
.music-title {
  font-size: 19px;
  letter-spacing: -1px;
  width: 90%;
}

/* 4. [NEW] ë§ŒëŠ¥ ë„êµ¬í•¨ ìŠ¤íƒ€ì¼ (íƒ­ ê¸°ëŠ¥) */
.tool-area {
  margin-top: 50px;
  border: 3px solid #000;
  border-radius: 15px;
  background: #fff;
  overflow: hidden;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
}
.tabs {
  display: flex;
  border-bottom: 3px solid #000;
  background: #eee;
}
.tab-btn {
  flex: 1;
  padding: 10px;
  cursor: pointer;
  font-family: 'Gamja Flower', cursive;
  font-size: 20px;
  background: #eee;
  border: none;
  border-right: 2px solid #ccc;
  outline: none;
}
.tab-btn:last-child { border-right: none; }
.tab-btn.active {
  background: #fff;
  font-weight: bold;
  color: #ff6b6b;
}
.tab-content {
  display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
  padding: 20px;
  min-height: 150px;
  text-align: center;
}
.tab-content.active {
  display: block; /* í™œì„±í™” ì‹œ ë³´ì„ */
}

/* ë„êµ¬í•¨ ë‚´ë¶€ ìš”ì†Œë“¤ */
.tool-input {
  border: 2px solid #888;
  border-radius: 10px;
  padding: 5px;
  font-family: 'Gamja Flower', cursive;
  font-size: 18px;
  width: 60%;
  text-align: center;
}
.tool-btn {
  border: 2px solid #000;
  border-radius: 10px;
  background: #ffec99;
  padding: 5px 15px;
  font-family: 'Gamja Flower', cursive;
  font-size: 18px;
  cursor: pointer;
  margin-top: 10px;
  box-shadow: 2px 2px 0 #000;
}
.tool-btn:active { box-shadow: none; transform: translate(2px, 2px); }
.result-box {
  margin-top: 15px;
  font-size: 28px;
  font-weight: bold;
  color: #ff6b6b;
  min-height: 40px;
}
/* ìŠ¤í†±ì›Œì¹˜ ì „ìš© */
.stopwatch-display { font-size: 40px; margin: 10px 0; letter-spacing: 2px; }

/* 5. ê¸°ì¡´ ì˜ì—­ë“¤ (ë°©ëª…ë¡, ë®¤ì§) */
.music-area { margin-top: 60px; text-align: center; }
.guestbook-area { margin-top: 50px; border-top: 3px dashed #bbb; padding-top: 40px; text-align: center; }
.video-container { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; border: 3px solid #000; border-radius: 15px; overflow: hidden; background: #000; box-shadow: 5px 5px 0px rgba(0,0,0,0.1); }
.video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.padlet-frame { width: 100%; height: 500px; border: 3px solid #000; border-radius: 15px; overflow: hidden; background: #fff; box-shadow: 5px 5px 0px rgba(0,0,0,0.1); }
.padlet-frame iframe { width: 100%; height: 100%; border: none; display: block; }

</style>
</head>
<body>
<div class="wrap">
  
  <img src="cover.png" alt="ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ" class="cover-img">

  <h1 id="title"></h1>
  <p>ê³ ë¯¼ ìˆêµ¬ë‚˜? ê±±ì • ë§ˆ ìƒ˜ì´ í•´ê²°í•´ì¤„ê²Œ!</p>
  
  <textarea id="worryInput" placeholder="ì—¬ê¸°ì— ê³ ë¯¼ì„ ì ìœ¼ë©´ í•œë°©ì— í•´ê²°ë˜ë‹ˆ ê±±ì •ë§ë¼êµ¬~"></textarea>
  <button id="sendBtn" onclick="sendAndGo()">ë³´ì¼€ìƒ˜ì˜ ì¼íƒ€ ê³ ë¯¼ í•´ê²°!</button>
  <div class="small">3í•™ë…„ 17ë°˜ í•œì •! í‰ìƒ ë¬´ë£Œ!</div>

  <div style="margin-top:50px; text-align:left;">
    <h2 class="section-title">ğŸ§° ë³´ì¼€ìƒ˜ì˜ ë§ŒëŠ¥ ë„êµ¬í•¨</h2>
  </div>
  
  <div class="tool-area">
    <div class="tabs">
      <button class="tab-btn active" onclick="openTab('dday')">ğŸ“… D-Day</button>
      <button class="tab-btn" onclick="openTab('stopwatch')">â±ï¸ íƒ€ì´ë¨¸</button>
      <button class="tab-btn" onclick="openTab('roulette')">ğŸ² ê²°ì •!</button>
    </div>

    <div id="dday" class="tab-content active">
      <p style="margin:0 0 10px;">ëª©í‘œ ë‚ ì§œë¥¼ ì…ë ¥í•´ë´!</p>
      <input type="date" id="ddayDate" class="tool-input">
      <button class="tool-btn" onclick="calcDday()">ê³„ì‚°</button>
      <div id="ddayResult" class="result-box">D-DayëŠ”?</div>
    </div>

    <div id="stopwatch" class="tab-content">
      <p style="margin:0;">ë¬¸ì œ í’€ ë•Œ ë”±ì´ì•¼!</p>
      <div class="stopwatch-display" id="timeDisplay">00:00:00</div>
      <button class="tool-btn" onclick="startTimer()">ì‹œì‘</button>
      <button class="tool-btn" style="background:#ffadad;" onclick="stopTimer()">ì •ì§€</button>
      <button class="tool-btn" style="background:#ddd;" onclick="resetTimer()">ë¦¬ì…‹</button>
    </div>

    <div id="roulette" class="tab-content">
      <p style="margin:0 0 5px;">ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•´ì„œ ì ì–´ë´!</p>
      <input type="text" id="rouletteInput" class="tool-input" placeholder="êµ­ì–´,ìˆ˜í•™,ì˜ì–´" style="width:80%;">
      <br>
      <button class="tool-btn" onclick="spinRoulette()">ê³¨ë¼ì¤˜!</button>
      <div id="rouletteResult" class="result-box">ë­ê°€ ë‚˜ì˜¬ê¹Œ?</div>
    </div>
  </div>
  <div class="guestbook-area">
    <h2 class="section-title">ğŸ“¢ 3í•™ë…„ 17ë°˜ ë°©ëª…ë¡!</h2>
    <div class="padlet-frame">
      <iframe src="https://padlet.com/embed/otdrqaeh2g0b4mug" frameborder="0" allow="camera;microphone;geolocation;display-capture;clipboard-write"></iframe>
    </div>
  </div>

  <div class="music-area">
    <h2 class="section-title music-title">ğŸµ ë³´ì¼€ìƒ˜ì´ ë§ì•„ì£¼ëŠ” Music playlist</h2>
    <div class="video-container">
      <iframe src="https://www.youtube.com/embed/uR3aQOgzyDU" 
              title="YouTube video player" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
              allowfullscreen>
      </iframe>
    </div>
  </div>

</div>

<script>
// ì‚¬ìš©ì ëª…ë‹¨
const USERS=[
"ì—°ìš°","ë¯¼ì¤€ì´","ê°€ìœ¤ì´","ë™ê· ì´","ì„œí˜„ì´","ì£¼ì€ì´","í˜„ìš°",
"ë™êµ­ì´","ì†Œìœ¤ì´","ì‹œì˜¨ì´","ì‹œìš°","ì§€ì—°ì´","ì§€ë¯¼ì´","ìƒí˜„ì´","ìˆ˜ì•„",
"ì¸ì„±ì´","ë‹¤í•´","ìŠ¹í›ˆì´","ìœ¤ì§€","ì£¼ì•„","ì¤€í¬","ì§€íš¨","íƒœí˜¸",
"í˜„ì¤€ì´","ì„œí˜„ì´","ì±„ì›ì´","ìœ¤í•˜","ì¸í˜•ì´","ë³‘ìš±ì´","ì‹œìœ¤ì´","ì¤€í˜ì´",
"ê°€í˜„ì´","í˜„ìš°","ì§€ìœ¤ì´", "ìŠˆë‹ˆ", "ìŠ¹ë¯¼ì´"
];

// ìŠ¤í¬ë¦½íŠ¸ URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykDuVl_i-7yEwy3eSZaoc_2A4kShtI51tQxmMcwYofLjOv1ygzhHUR162egRNgu_Aq/exec";

let isMoving = false;
const p = new URLSearchParams(location.search);
const u = parseInt(p.get("u"), 10) || 1;
const userName = USERS[u-1] || "ë°©ë¬¸ì"; 

document.getElementById("title").textContent = `${userName}ì˜ ê³ ë¯¼ ì ‘ìˆ˜!`;

// â˜…â˜…â˜… ë„êµ¬í•¨ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ â˜…â˜…â˜…

// 1. íƒ­ ì „í™˜ ê¸°ëŠ¥
function openTab(tabName) {
  // ëª¨ë“  íƒ­ ë‚´ìš© ìˆ¨ê¸°ê¸°
  const contents = document.getElementsByClassName("tab-content");
  for(let i=0; i<contents.length; i++) contents[i].classList.remove("active");
  
  // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼
  const btns = document.getElementsByClassName("tab-btn");
  for(let i=0; i<btns.length; i++) btns[i].classList.remove("active");

  // ì„ íƒëœ íƒ­ ë³´ì´ê¸° & ë²„íŠ¼ í™œì„±í™”
  document.getElementById(tabName).classList.add("active");
  event.currentTarget.classList.add("active");
}

// 2. D-Day ê³„ì‚°ê¸°
function calcDday() {
  const input = document.getElementById("ddayDate").value;
  if(!input) { alert("ë‚ ì§œë¥¼ ì„ íƒí•´ì¤˜!"); return; }
  
  const target = new Date(input);
  const today = new Date();
  // ì‹œê°„ ì´ˆê¸°í™” (ë‚ ì§œë§Œ ë¹„êµ)
  today.setHours(0,0,0,0);
  
  const diff = target - today;
  const dayDiff = Math.ceil(diff / (1000 * 60 * 60 * 24));
  
  const resultBox = document.getElementById("ddayResult");
  if(dayDiff > 0) resultBox.textContent = `D - ${dayDiff}`;
  else if(dayDiff === 0) resultBox.textContent = `D - Day!`;
  else resultBox.textContent = `D + ${Math.abs(dayDiff)}`;
}

// 3. ìŠ¤í†±ì›Œì¹˜
let timerId = null;
let seconds = 0;
function updateTime() {
  seconds++;
  const h = Math.floor(seconds / 3600).toString().padStart(2,'0');
  const m = Math.floor((seconds % 3600) / 60).toString().padStart(2,'0');
  const s = (seconds % 60).toString().padStart(2,'0');
  document.getElementById("timeDisplay").textContent = `${h}:${m}:${s}`;
}
function startTimer() {
  if(timerId) return;
  timerId = setInterval(updateTime, 1000);
}
function stopTimer() {
  clearInterval(timerId);
  timerId = null;
}
function resetTimer() {
  stopTimer();
  seconds = 0;
  document.getElementById("timeDisplay").textContent = "00:00:00";
}

// 4. ê²°ì •ì˜ ì‹  (ëœë¤ ë½‘ê¸°)
function spinRoulette() {
  const raw = document.getElementById("rouletteInput").value;
  if(!raw.trim()) { alert("í•­ëª©ì„ ì ì–´ì¤˜!"); return; }
  
  const list = raw.split(",").map(s => s.trim()).filter(s => s !== "");
  if(list.length < 1) return;

  const resultBox = document.getElementById("rouletteResult");
  resultBox.textContent = "ë‘êµ¬ë‘êµ¬...";
  
  setTimeout(() => {
    const randomPick = list[Math.floor(Math.random() * list.length)];
    resultBox.textContent = `ğŸ‘‰ ${randomPick} !`;
  }, 1000);
}

// ê¸°ì¡´ ê³ ë¯¼ í•´ê²° ë¡œì§ë“¤...
const KEYWORDS = {
  study: ["ê³µë¶€","ì‹œí—˜","ì„±ì ","ë“±ê¸‰","ë‚´ì‹ ","ìˆ˜ëŠ¥","ëª¨ê³ ","ëª¨ì˜ê³ ì‚¬","í•™í‰","ì¤‘ê°„ê³ ì‚¬","ê¸°ë§ê³ ì‚¬","ìˆ˜í–‰","ìˆ˜í–‰í‰ê°€","ìª½ì§€ì‹œí—˜","ë“£ê¸°í‰ê°€","ì„œìˆ í˜•","ì„¸íŠ¹","ìƒê¸°ë¶€","ìì†Œì„œ","ì…ì‹œ","ìˆ˜ì‹œ","ì •ì‹œ","ëŒ€í•™","ëŒ€í•™êµ","ìº í¼ìŠ¤","ì¸ì„œìš¸","ì§€ê±°êµ­","í•©ê²©","ë¶ˆí•©ê²©","ì˜ˆë¹„","ê´‘íƒˆ","ì¬ìˆ˜","ì‚¼ìˆ˜","ë°˜ìˆ˜","ìí‡´","ê²€ì •ê³ ì‹œ","íœ´í•™","ì „í•™","ë‹´ì„","ìŒ¤","ì„ ìƒë‹˜","êµë¬´ì‹¤","í•™êµ","ë°˜ì¥","ë¶€ë°˜ì¥","í•™ìƒíšŒ","ë™ì•„ë¦¬","ììŠµ","ì•¼ì","ì„ì‹","í•™ì›","ê³¼ì™¸","ì¸ê°•","ë…ì„œì‹¤","ìŠ¤ì¹´","ìŠ¤í„°ë””ì¹´í˜","ë„ì„œê´€","ë°¤ìƒ˜","ë²¼ë½ì¹˜ê¸°","ì˜¬ë°±","1ë“±ê¸‰","9ë“±ê¸‰","ê³¼ëª©","êµ­ì–´","ìˆ˜í•™","ì˜ì–´","ì‚¬íƒ","ê³¼íƒ","í•œêµ­ì‚¬","ë§í•¨","ë§í–ˆ","ì¡°ì§","ì°ì‹ ","ì§‘ì¤‘","ì¡¸ë ¤","ì ì™€","ë¹¡ê³µ","ì—´ê³µ","ì¦ê³µ","í•„ê¸°","ë…¸íŠ¸","ë¬¸ì œì§‘","ìˆ","ë§ˆí”Œ","ìì´","ìˆ˜íŠ¹","ìˆ˜ì™„","ì•„ì´íŒ¨ë“œ","ìˆ™ì œ","ê³¼ì œ","ë°œí‘œ","ì¡°ë³„","íŒ€í”Œ","ë²„ìŠ¤","í”„ë¦¬ë¼ì´ë”","ì „êµ","1ë“±","ê¼´ì°Œ"],
  relation: ["ì¹œêµ¬","ë² í”„","ì°ì¹œ","ì ˆì¹œ","ë‹¨ì§","ë¬´ë¦¬","ì™•ë”°","ì€ë”°","ì „ë”°","ì‹¸ì›€","ë‹¤íˆ¼","í™”í•´","ì‚¬ê³¼","ì†ì ˆ","ì ˆêµ","ì°¨ë‹¨","ë¸”ë½","ë’·ë‹´","ì•ë‹´","ê¼½","ì‹œë¹„","ë¬´ì‹œ","ë°°ì‹ ","ê±°ì§“ë§","ì†Œë¬¸","ì €ê²©","ë°•ì œ","ë¹„í˜¸ê°","ê·¹í˜","ì—°ì• ","ì‚¬ë‘","ì¢‹ì•„","ê³ ë°±","ì¸","ì¸ë‚¨","ì¸ë…€","ì§ì‚¬ë‘","ì§ë‚¨","ì§ë…€","ë‚¨ì¹œ","ì—¬ì¹œ","ì „ë‚¨ì¹œ","ì „ì—¬ì¹œ","ì´ë³„","í—¤ì–´ì§","ì°¨ì„","ëª¨ì†”","ì»¤í”Œ","ë°ì´íŠ¸","ê¸°ë…ì¼","ì„ ë¬¼","í¸ì§€","ë””ì— ","DM","í˜ë©”","ì¹´í†¡","ì¹¼ë‹µ","ì½ì”¹","ì•ˆì½ì”¹","í”„ì‚¬","ë°°ì‚¬","ìƒë©”","ìŠ¤í† ë¦¬","ì¸ìŠ¤íƒ€","ì¢‹ì•„ìš”","íŒ”ë¡œìš°","ì–¸íŒ”","ë§íŒ”","ë¹„ê³„","ë¶€ê³„","ì—¼íƒ","ì—°ë½","ê°€ì¡±","ì—„ë§ˆ","ì•„ë¹ ","ë¶€ëª¨ë‹˜","ì—„ë¹ ","ë™ìƒ","ì–¸ë‹ˆ","ëˆ„ë‚˜","ì˜¤ë¹ ","í˜•","ë‚¨ë§¤","ìë§¤","í˜•ì œ","ì”ì†Œë¦¬","ê°€ì¶œ","ì™¸ë¡œì›€","ìš°ìš¸","ì„œìš´","ì§œì¦","ì§ˆíˆ¬","ë¶€ëŸ¬ì›€","ìª½íŒ”ë¦¼","í‘ì—­ì‚¬","ëˆˆì¹˜"],
  food: ["ë°°ê³ ","ë¨¹","ë§›","ì¡´ë§›","ê¿€ë§›","ë…¸ë§›","ê¸‰ì‹","í•™ì‹","ë§¤ì ","í¸ì˜ì ","ë¼ë©´","ì»µë¼ë©´","ë¶ˆë‹­","ë§ˆë¼","ë§ˆë¼íƒ•","ë§ˆë¼ìƒ¹ê¶ˆ","íƒ•í›„ë£¨","ë–¡ë³¶ì´","ì—½ë–¡","ì‹ ì „","ì¹˜í‚¨","í”¼ì","í–„ë²„ê±°","ë§¥ë‚ ","ë§˜í„°","ë¡¯ë°ë¦¬ì•„","ë²„ê±°í‚¹","ì„œë¸Œì›¨ì´","ê³µì°¨","ë²„ë¸”í‹°","ìŠ¤ë²…","ì•„ì•„","ì¹´í˜","ë””ì €íŠ¸","ë¹µ","ì¼€ì´í¬","ì•„ì´ìŠ¤í¬ë¦¼","ë² ë¼","ê³ ê¸°","ì‚¼ê²¹ì‚´","ê³±ì°½","ë‹­ë°œ","ì•¼ì‹","ë°°ë‹¬","ë°°ë¯¼","ìš”ê¸°ìš”","í­ì‹","ì…ë§›","ë‹¤ì´ì–´íŠ¸","ì‚´","ì²´ì¤‘","ëª¸ë¬´ê²Œ","ë¼ì§€","ëš±ëš±","ë©¸ì¹˜","í—¬ìŠ¤","ìš´ë™","ê·¼ìœ¡","ë³µê·¼","ì‹ë‹¨","ìš”ìš”","ë°°ë¶ˆ","êº¼ì–µ","ì–¼êµ´","í”¼ë¶€","ì—¬ë“œë¦„","ë¾°ë£¨ì§€","í™”ì¥","í‹´íŠ¸","ë Œì¦ˆ","ìŒìˆ˜","ì„±í˜•","ë¨¸ë¦¬","í—¤ì–´","ì•ë¨¸ë¦¬","í‚¤","ê±°ìš¸","ì…€ì¹´","í”¼ê³¤","ìˆ˜ë©´","ì ","ë¶ˆë©´ì¦","ìƒë¦¬í†µ","ë‘í†µ","ë°°ì•„íŒŒ","ê°ê¸°","ëª¸ì‚´","ì²´ë ¥"],
  money: ["ëˆ","ìš©ëˆ","ì„¸ë±ƒëˆ","ì§€ê°‘","í†µì¥","í……ì¥","ì €ê¸ˆ","ì ê¸ˆ","ì£¼ì‹","ì½”ì¸","ë¹„íŠ¸ì½”ì¸","ì•Œë°”","ì•„ë¥´ë°”ì´íŠ¸","ì‹œê¸‰","ì›”ê¸‰","ì‚¬ì¥ë‹˜","ê±°ì§€","ë¹ˆí„¸í„°ë¦¬","ë¶€ì","ì¬ë²Œ","ê±´ë¬¼ì£¼","ë¡œë˜","ë³µê¶Œ","ë‹¹ì²¨","í–‰ìš´","í”Œë ‰ìŠ¤","ì§€ë¦„ì‹ ","ì‡¼í•‘","ë¹„ì‹¸","ì„¸ì¼","í• ì¸","ë¬´ë£Œ","ê³µì§œ","í™˜ë¶ˆ","ì¤‘ê³ ","ë‹¹ê·¼","ë²ˆê°œ","ì•„ì´í°","ê°¤ëŸ­ì‹œ","ì—ì–´íŒŸ","ë²„ì¦ˆ","ì•„ì´íŒ¨ë“œ","íƒ­","ë…¸íŠ¸ë¶","ë§¥ë¶","ì»´í“¨í„°","ê²Œì„","í˜„ì§ˆ","ì§„ë¡œ","ê¿ˆ","ì¥ë˜í¬ë§","ë¯¸ë˜","ì·¨ì—…","ì§ì—…","ê³µë¬´ì›","êµì‚¬","ì˜ì‚¬","ë³€í˜¸ì‚¬","ì—°ì˜ˆì¸","ì•„ì´ëŒ","ë°°ìš°","ê°€ìˆ˜","ìœ íŠœë²„","ìŠ¤íŠ¸ë¦¬ë¨¸","ì¸í”Œë£¨ì–¸ì„œ","ì„±ê³µ","ì‹¤íŒ¨","ì¸ìƒ","ê°“ìƒ","í˜„íƒ€","ë©˜ë¶•","ìŠ¬ëŸ¼í”„","ì–´ë¥¸","ì„±ì¸","20ì‚´","ë¯¼ì¦","ë©´í—ˆ","ì—¬í–‰"]
};

function sendAndGo(){
  const worryText = document.getElementById("worryInput").value;
  const btn = document.getElementById("sendBtn");

  if(!worryText.trim()){
      alert("ê³ ë¯¼ì„ ì ì–´ì•¼ í•´ê²°í•´ì£¼ì§€!");
      return;
  }

  btn.disabled = true;
  btn.textContent = "ê³ ë¯¼ í•´ê²° ì¤‘...";

  setTimeout(() => { goNextPage(); }, 1500);

  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors", 
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name: userName, worry: worryText }),
  })
  .then(() => { goNextPage(); })
  .catch((error) => {
    console.error("Error:", error);
    goNextPage();
  });
}

function goNextPage(){
  if (isMoving) return; 
  isMoving = true;

  const text = document.getElementById("worryInput").value; 
  let min = 0;
  let max = 19; 

  const hasKeyword = (list) => list.some(word => text.includes(word));

  if (hasKeyword(KEYWORDS.study)) { min = 20; max = 39; } 
  else if (hasKeyword(KEYWORDS.relation)) { min = 40; max = 59; } 
  else if (hasKeyword(KEYWORDS.food)) { min = 60; max = 79; } 
  else if (hasKeyword(KEYWORDS.money)) { min = 80; max = 99; }
  
  const a = Math.floor(Math.random() * (max - min + 1)) + min;
  location.href = `answer.html?u=${u}&a=${a}`;
}

const hints = [
  "ì„±ì ì´ ì•ˆ ì˜¬ë¼ì„œ ê³ ë¯¼ì´ì•¼? ã… ã… ",
  "ì¹œêµ¬ë‘ ì‹¸ì› ëŠ”ë° í™”í•´í•˜ê³  ì‹¶ì–´?",
  "ì˜¤ëŠ˜ ê¸‰ì‹ ë©”ë‰´ê°€ ë§›ì—†ëŠ” ê±°ë¼ ìš°ìš¸í•´?",
  "ì‚¬ê³  ì‹¶ì€ ë¬¼ê±´ì´ ìˆì–´ì„œ ê³ ë¯¼ì´ì•¼?",
  "ì§ì‚¬ë‘ ë•Œë¬¸ì— ì ì´ ì•ˆ ì™€?",
  "ëŒ€í•™ ì–´ë”” ê°€ì•¼ í• ì§€ ë§‰ë§‰í•´?",
  "ë¶€ëª¨ë‹˜ ì”ì†Œë¦¬ ë•Œë¬¸ì— í˜ë“¤ì–´?",
  "ë‹¤ì´ì–´íŠ¸ê°€ ëœ»ëŒ€ë¡œ ì•ˆ ë¼?",
  "ìš”ì¦˜ ìê¾¸ ë‚¨ì´ë‘ ë¹„êµí•˜ê²Œ ë¼?",
  "ìš”ì¦˜ ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ê³  ë¬´ê¸°ë ¥í•´?",
  "ë©´ì ‘ì´ë‚˜ ìì†Œì„œ ë•Œë¬¸ì— ê±±ì •ì´ì•¼?",
  "ì‹œí—˜ ë‚  ì‹¤ìˆ˜í• ê¹Œ ë´ ë¶ˆì•ˆí•´?",
  "ì£¼ë³€ì—ì„œ ë‚˜ë§Œ ë’¤ì²˜ì§€ëŠ” ê²ƒ ê°™ì•„?",
  "ì£¼ë§ì— ë­ í•˜ê³  ë†€ì§€ ê³ ë¯¼ì´ì•¼?",
  "ê³ ë“±í•™êµ ì„ ìƒë‹˜í•œí…Œ ì„œìš´í•œ ê±° ìˆì–´?",
  "ë°˜ ì¹œêµ¬ë“¤ì´ë‘ ì–´ìƒ‰í•´ì„œ ê³ ë¯¼ì´ì•¼?",
  "ìš”ì¦˜ ë°¤ì— ì ì´ ì˜ ì•ˆ ì™€?",
  "ë‚´ ê¿ˆì´ ë­”ì§€ ì•„ì§ ëª¨ë¥´ê² ì–´?",
  "ê·¸ëƒ¥ ì•„ë¬´í•œí…Œë‚˜ ë­ë¼ë„ í„¸ì–´ë†“ê³  ì‹¶ì–´?",
  "ì§€ê¸ˆ ë‹¹ì¥ ì–´ë””ë¡ ê°€ ë– ë‚˜ê³  ì‹¶ì–´?"
];

const worryInput = document.getElementById("worryInput");

function rotatePlaceholder() {
  const randomIdx = Math.floor(Math.random() * hints.length);
  worryInput.placeholder = `${userName}~ ì˜ì§€ë‚´ì§€? ê·¼ë° ${hints[randomIdx]}\nì—¬ê¸°ì— ê³ ë¯¼ì„ ì ì–´ë´ ë³´ì¼€ìƒ˜ì´ í•´ê²°í•´ ì¤„ê²Œ!`;
}

rotatePlaceholder();
setInterval(rotatePlaceholder, 5000); 
  
</script>
</body>
</html>
