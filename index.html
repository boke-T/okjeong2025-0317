<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ</title>
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
<style>
/* 1. ì „ì²´ ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  font-family: 'Gamja Flower', cursive;
  background-color: #fff9c4;
  background-image: radial-gradient(#ddd 1px, transparent 1px);
  background-size: 20px 20px;
  display: flex;
  justify-content: center;
  color: #333;
}
.wrap {
  max-width: 400px;
  width: 100%;
  padding: 30px;
  text-align: center;
  box-sizing: border-box;
  padding-bottom: 80px; /* ì•„ë˜ ì—¬ë°± í™•ë³´ */
}
h1 {
  font-size: 32px;
  margin-top: 50px;
  text-shadow: 2px 2px 0px #fff;
}
p {
  font-size: 20px;
  margin: 10px 0 30px;
}

/* 2. ì…ë ¥ì°½ & ë²„íŠ¼ ê¾¸ë¯¸ê¸° */
textarea {
  width: 100%;
  height: 140px;
  border: 3px solid #000;
  border-radius: 15px;
  padding: 15px;
  font-size: 20px;
  font-family: 'Gamja Flower', cursive;
  resize: none;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
  outline: none;
  box-sizing: border-box;
}
textarea:focus {
  background-color: #fff;
  box-shadow: 5px 5px 0px #ff6b6b;
}
button {
  margin-top: 25px;
  width: 100%;
  padding: 15px;
  font-size: 24px;
  font-family: 'Gamja Flower', cursive;
  border: 3px solid #000;
  border-radius: 50px;
  background: #ff6b6b;
  color: #fff;
  cursor: pointer;
  box-shadow: 4px 4px 0px #000;
  transition: 0.1s;
}
button:active {
  transform: translate(4px, 4px);
  box-shadow: 0px 0px 0px #000;
}
button:disabled {
  background: #ccc;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.small {
  margin-top: 20px;
  font-size: 16px;
  color: #777;
}

/* 3. ë°©ëª…ë¡ ì˜ì—­ ìŠ¤íƒ€ì¼ */
.guestbook-area {
  margin-top: 60px;
  border-top: 3px dashed #bbb; /* ì ì„  */
  padding-top: 40px;
  text-align: center;
}
.guestbook-area h2 {
  font-family: 'Gamja Flower', cursive;
  font-size: 26px;
  color: #555;
  margin-bottom: 20px;
  background: #fff;
  display: inline-block;
  padding: 5px 15px;
  border-radius: 20px;
  border: 2px solid #ddd;
}

/* íŒ¨ë“¤ë › í”„ë ˆì„ */
.padlet-frame {
  width: 100%;
  height: 500px;
  border: 3px solid #000;
  border-radius: 15px;
  overflow: hidden;
  background: #fff;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
}
.padlet-frame iframe {
  width: 100%;
  height: 100%;
  border: none;
  display: block; /* ê³µë°± ì œê±° */
}
</style>
</head>
<body>
<div class="wrap">
  <h1 id="title"></h1>
  <p>ê³ ë¯¼ ìˆêµ¬ë‚˜? ê±±ì • ë§ˆ ìƒ˜ì´ í•´ê²°í•¨!</p>
  
  <textarea id="worryInput" placeholder="ì—¬ê¸°ì— ê³ ë¯¼ì„ ì ìœ¼ë©´ í•œë°©ì— í•´ê²°ë˜ë‹ˆ ê±±ì •ë§ë¼êµ¬~"></textarea>
  <button id="sendBtn" onclick="sendAndGo()">ë³´ì¼€ìƒ˜ì˜ ì¼íƒ€ ê³ ë¯¼ í•´ê²°!</button>
  <div class="small">í‰ìƒ ë¬´ë£Œì§€ë§Œ í•˜ë£¨ í•œ ë²ˆë§Œ ê°€ëŠ¥ (ì‹ ì¤‘ í•„ìš”)</div>

  <div class="guestbook-area">
    <h2>ğŸ“¢ 3í•™ë…„ 17ë°˜ ìˆ˜ë‹¤ë°©!</h2>
    <div class="padlet-frame">
      <iframe src="https://padlet.com/embed/otdrqaeh2g0b4mug" frameborder="0" allow="camera;microphone;geolocation;display-capture;clipboard-write"></iframe>
    </div>
  </div>

</div>

<script>
// ì‚¬ìš©ì ëª…ë‹¨ (ì—…ë°ì´íŠ¸ë¨)
const USERS=[
"ì—°ìš°","ë¯¼ì¤€ì´","ê°€ìœ¤ì´","ë™ê· ì´","ì„œí˜„ì´","ì£¼ì€ì´","í˜„ìš°",
"ë™êµ­ì´","ì†Œìœ¤ì´","ì‹œì˜¨ì´","ì‹œìš°","ì§€ì—°ì´","ì§€ë¯¼ì´","ìƒí˜„ì´","ìˆ˜ì•„",
"ì¸ì„±ì´","ë‹¤í•´","ìŠ¹í›ˆì´","ìœ¤ì§€","ì£¼ì•„","ì¤€í¬","ì§€íš¨","íƒœí˜¸",
"í˜„ì¤€ì´","ì„œí˜„ì´","ì±„ì›ì´","ìœ¤í•˜","ì¸í˜•ì´","ë³‘ìš±ì´","ì‹œìœ¤ì´","ì¤€í˜ì´",
"ê°€í˜„ì´","í˜„ìš°","ì§€ìœ¤ì´", "ìŠˆë‹ˆ"
];

// ìŠ¤í¬ë¦½íŠ¸ URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykDuVl_i-7yEwy3eSZaoc_2A4kShtI51tQxmMcwYofLjOv1ygzhHUR162egRNgu_Aq/exec";

// ë©ˆì¶¤ ë°©ì§€ìš© í”Œë˜ê·¸
let isMoving = false;

// URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬
const p = new URLSearchParams(location.search);
const u = parseInt(p.get("u"), 10) || 1;
const userName = USERS[u-1] || "ë°©ë¬¸ì"; 

// ì œëª© ì„¤ì •
document.getElementById("title").textContent = `${userName}ì˜ ê³ ë¯¼ ì ‘ìˆ˜!`;

function sendAndGo(){
  const worryText = document.getElementById("worryInput").value;
  const btn = document.getElementById("sendBtn");

  // ë‚´ìš© ì—†ìœ¼ë©´ ê²½ê³  (ì„ íƒì‚¬í•­)
  if(!worryText.trim()){
      alert("ê³ ë¯¼ì„ ì ì–´ì•¼ í•´ê²°í•´ì£¼ì§€!");
      return;
  }

  // ë²„íŠ¼ ë¹„í™œì„±í™”
  btn.disabled = true;
  btn.textContent = "ê³ ë¯¼ í•´ê²° ì¤‘...";

  // â˜… ì¤‘ìš”: 1.5ì´ˆ í›„ ë¬´ì¡°ê±´ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™ (ì•ˆì „ì¥ì¹˜ ë³µêµ¬)
  setTimeout(() => { goNextPage(); }, 1500);

  // ë°ì´í„° ì „ì†¡
  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors", 
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      name: userName,
      worry: worryText
    }),
  })
  .then(() => {
    goNextPage();
  })
  .catch((error) => {
    console.error("Error:", error);
    goNextPage();
  });
}

function goNextPage(){
  if (isMoving) return; 
  isMoving = true;
  const a = Math.floor(Math.random()*100);
  location.href = `answer.html?u=${u}&a=${a}`;
}
</script>
</body>
</html>


