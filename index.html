<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ</title>
<meta property="og:title" content="ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ">
<meta property="og:description" content="3í•™ë…„ 17ë°˜ ì¹œêµ¬ë“¤ì˜ ê³ ë¯¼ì„ í•´ê²°í•´ ë“œë¦½ë‹ˆë‹¤!">
<meta property="og:image" content="cover.png"> 
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
<style>
/* 1. ì „ì²´ ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  font-family: 'Gamja Flower', cursive;
  background-color: #fff9c4;
  background-image: radial-gradient(#ddd 1px, transparent 1px);
  background-size: 20px 20px;
  display: flex;
  justify-content: center;
  color: #333;
}
.wrap {
  max-width: 400px;
  width: 100%;
  padding: 30px;
  text-align: center;
  box-sizing: border-box;
  padding-bottom: 80px;
}

/* â˜… í‘œì§€ ì´ë¯¸ì§€ â˜… */
.cover-img {
  width: 100%;              
  margin-bottom: 10px;
  border: none;
  border-radius: 0;
  box-shadow: none;
  animation: characterGlow 3s ease-in-out infinite;
}

@keyframes characterGlow {
  0%, 100% {
    transform: translateY(0px);
    filter: drop-shadow(0 0 5px rgba(138, 43, 226, 0.3));
  }
  50% {
    transform: translateY(-15px); 
    filter: drop-shadow(0 0 10px rgba(138, 43, 226, 0.8)) 
            drop-shadow(0 0 30px rgba(138, 43, 226, 0.6));
  }
}

h1 {
  font-size: 32px;
  margin-top: 10px;        
  text-shadow: 2px 2px 0px #fff;
}
p {
  font-size: 20px;
  margin: 10px 0 30px;
}

/* 2. ì…ë ¥ì°½ & ë²„íŠ¼ */
textarea {
  width: 100%;
  height: 140px;
  border: 3px solid #000;
  border-radius: 15px;
  padding: 15px;
  font-size: 20px;
  font-family: 'Gamja Flower', cursive;
  resize: none;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
  outline: none;
  box-sizing: border-box;
}
textarea:focus {
  background-color: #fff;
  box-shadow: 5px 5px 0px #ff6b6b;
}
button {
  margin-top: 25px;
  width: 100%;
  padding: 15px;
  font-size: 24px;
  font-family: 'Gamja Flower', cursive;
  border: 3px solid #000;
  border-radius: 50px;
  background: #ff6b6b;
  color: #fff;
  cursor: pointer;
  box-shadow: 4px 4px 0px #000;
  transition: 0.1s;
}
button:active {
  transform: translate(4px, 4px);
  box-shadow: 0px 0px 0px #000;
}
button:disabled {
  background: #ccc;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.small {
  margin-top: 20px;
  font-size: 16px;
  color: #777;
}

/* 3. ê³µí†µ ì„¹ì…˜ ì œëª© */
.section-title {
  font-family: 'Gamja Flower', cursive;
  font-size: 24px;
  color: #555;
  margin-bottom: 15px;
  background: #fff;
  display: inline-block;
  padding: 5px 15px;
  border-radius: 20px;
  border: 2px solid #ddd;
}
.music-title {
  font-size: 19px;
  letter-spacing: -1px;
  width: 90%;
}

/* â˜…â˜…â˜… [íŒì—…(ëª¨ë‹¬)] â˜…â˜…â˜… */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  z-index: 1000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(2px);
}
.modal-window {
  background: #fff9c4;
  width: 90%;
  max-width: 360px;
  padding: 20px;
  border-radius: 25px;
  border: 4px solid #000;
  box-shadow: 8px 8px 0px rgba(0,0,0,0.2);
  position: relative;
  text-align: center;
  animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes popUp {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
.close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 32px;
  cursor: pointer;
  color: #555;
  font-weight: bold;
  line-height: 20px;
  transition: 0.2s;
}
.close-btn:hover { color: #ff6b6b; transform: scale(1.2); }

/* â˜…â˜…â˜… [ë‘¥ë‘¥ ë– ë‹¤ë‹ˆëŠ” ë²„íŠ¼ (FAB)] â˜…â˜…â˜… */
.fab-btn {
  position: fixed;
  bottom: 25px;
  right: 25px;
  width: 55px;
  height: 55px;
  background: #fff;
  border: 3px solid #000;
  border-radius: 50%;
  font-size: 28px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 3px 3px 0 #000;
  z-index: 900;
  transition: transform 0.2s;
}
.fab-btn:hover { background: #ffec99; transform: scale(1.1); }
.fab-btn:active { box-shadow: none; transform: translate(3px, 3px); }

/* â˜…â˜…â˜… [ë„êµ¬í•¨ ë‚´ë¶€] â˜…â˜…â˜… */
.tool-area {
  border: none; 
  box-shadow: none;
  margin-top: 5px;
}

/* íƒ­ ë²„íŠ¼ 2ì¤„ ë°°ì¹˜ */
.tabs {
  display: flex;
  flex-wrap: wrap; 
  justify-content: center;
  gap: 5px;
  background: transparent;
  border-bottom: none;
  margin-bottom: 15px;
}
.tab-btn {
  flex: 1 1 30%; 
  padding: 8px 0;
  cursor: pointer;
  font-family: 'Gamja Flower', cursive;
  font-size: 17px;
  background: #fff;
  border: 2px solid #ccc;
  border-radius: 15px;
  outline: none;
  color: #888;
  transition: 0.2s;
}
.tab-btn.active {
  background: #ff6b6b;
  border: 2px solid #000;
  font-weight: bold;
  color: #fff;
  box-shadow: 2px 2px 0 #000;
  transform: translateY(-2px);
}

.tab-content {
  display: none; 
  padding: 15px;
  min-height: 160px;
  text-align: center;
  background: #fff;
  border-radius: 15px;
  border: 2px dashed #aaa;
}
.tab-content.active { display: block; }

/* ê³µí†µ ì¸í’‹ & ë²„íŠ¼ */
.tool-input {
  border: 2px solid #000;
  border-radius: 10px;
  padding: 8px;
  font-family: 'Gamja Flower', cursive;
  font-size: 18px;
  width: 80%;
  text-align: center;
  background: #fdfdfd;
  margin-bottom: 10px;
}
.tool-input:focus { background: #ffec99; outline: none; }

.tool-btn {
  border: 2px solid #000;
  border-radius: 20px;
  background: #ffec99;
  padding: 6px 20px;
  font-family: 'Gamja Flower', cursive;
  font-size: 20px;
  cursor: pointer;
  margin-top: 5px;
  box-shadow: 3px 3px 0 #000;
  color: #333;
  transition: 0.1s;
}
.tool-btn:active { box-shadow: none; transform: translate(3px, 3px); }

.result-box {
  margin-top: 15px;
  font-size: 24px;
  font-weight: bold;
  color: #ff6b6b;
  min-height: 30px;
  text-shadow: 1px 1px 0 #fff;
}

/* â˜…â˜…â˜… [ìˆ˜ì •ë¨] ë½€ëª¨ë„ë¡œ íƒ€ì´ë¨¸ ìŠ¤íƒ€ì¼ â˜…â˜…â˜… */
.timer-display { 
  font-size: 50px; /* ë” í¬ê²Œ! */
  margin: 10px auto; 
  letter-spacing: 3px;
  background: #333;
  color: #ff6b6b; /* ê³µë¶€ ì‹œê°„ ê¸°ë³¸ìƒ‰ */
  padding: 10px;
  border-radius: 15px;
  width: 80%;
  border: 4px solid #000;
  font-family: monospace;
  box-shadow: inset 3px 3px 8px #000;
  transition: color 0.3s;
}
.pomo-mode-btn {
  padding: 5px 10px;
  font-size: 16px;
  border: 2px solid #888;
  background: #fff;
  border-radius: 15px;
  cursor: pointer;
  margin: 0 3px 10px 3px;
  font-family: 'Gamja Flower', cursive;
  
  /* [ì¶”ê°€] ê¸°ë³¸ ê¸€ììƒ‰ì„ ì§„í•œ íšŒìƒ‰ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì˜ ë³´ì´ê²Œ í•¨ */
  color: #555; 
}
.pomo-mode-btn.active {
  background: #333;
  color: #fff;
  border: 2px solid #000;
  font-weight: bold;
}

/* ë©ë•Œë¦¬ê¸° ì• ë‹ˆë©”ì´ì…˜ */
.breathe-circle {
  width: 80px; height: 80px;
  background: #a0c4ff;
  border-radius: 50%;
  margin: 20px auto;
  box-shadow: 0 0 20px #a0c4ff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  color: #fff;
  font-weight: bold;
}
@keyframes breatheAnim {
  0% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(2.0); opacity: 0.4; } 
  100% { transform: scale(1); opacity: 0.8; } 
}

.music-area { margin-top: 60px; text-align: center; }
.guestbook-area { margin-top: 50px; border-top: 3px dashed #bbb; padding-top: 40px; text-align: center; }
.video-container { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; border: 3px solid #000; border-radius: 15px; overflow: hidden; background: #000; box-shadow: 5px 5px 0px rgba(0,0,0,0.1); }
.video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.padlet-frame { width: 100%; height: 500px; border: 3px solid #000; border-radius: 15px; overflow: hidden; background: #fff; box-shadow: 5px 5px 0px rgba(0,0,0,0.1); }
.padlet-frame iframe { width: 100%; height: 100%; border: none; display: block; }

</style>
</head>
<body>
<div class="wrap">
  
  <img src="cover.png" alt="ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ" class="cover-img">

  <h1 id="title"></h1>
  <p>ê³ ë¯¼ ìˆêµ¬ë‚˜? ê±±ì • ë§ˆ ìƒ˜ì´ ë„ì™€ì¤„ê²Œ!</p>
  
  <textarea id="worryInput" placeholder="ì—¬ê¸°ì— ê³ ë¯¼ì„ ì ìœ¼ë©´ í•œë°©ì— í•´ê²°ë˜ë‹ˆ ê±±ì •ë§ë¼êµ¬~"></textarea>
  <button id="sendBtn" onclick="sendAndGo()">ë³´ì¼€ìƒ˜ì˜ ì¼íƒ€ ê³ ë¯¼ í•´ê²°!</button>
  <div class="small">3í•™ë…„ 17ë°˜ í•œì •! í‰ìƒ ë¬´ë£Œ!</div>

  <div class="guestbook-area">
    <h2 class="section-title">ğŸ“¢ 3í•™ë…„ 17ë°˜ ë°©ëª…ë¡!</h2>
    <div class="padlet-frame">
      <iframe src="https://padlet.com/embed/otdrqaeh2g0b4mug" frameborder="0" allow="camera;microphone;geolocation;display-capture;clipboard-write"></iframe>
    </div>
  </div>

  <div class="music-area">
    <h2 class="section-title music-title">ğŸµ ë³´ì¼€ìƒ˜ì´ ë§ì•„ì£¼ëŠ” Music playlist</h2>
    <div class="video-container">
      <iframe src="https://www.youtube.com/embed/uR3aQOgzyDU" 
              title="YouTube video player" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
              allowfullscreen>
      </iframe>
    </div>
  </div>

</div>

<div class="fab-btn" onclick="openToolModal()" title="ë§ŒëŠ¥ ë„êµ¬í•¨ ì—´ê¸°">
  ğŸ§°
</div>

<div id="toolModal" class="modal-overlay" onclick="closeToolModalOutside(event)">
  <div class="modal-window">
    <span class="close-btn" onclick="closeToolModal()">&times;</span>
    <h2 class="section-title" style="margin-top:0; font-size:22px;">âœ¨ ë³´ì¼€ìƒ˜ì˜ ë§ŒëŠ¥ ë„êµ¬í•¨ âœ¨</h2>
    
    <div class="tool-area">
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab('dday')">ğŸ“… D-Day</button>
        <button class="tab-btn" onclick="openTab('stopwatch')">ğŸ… ë½€ëª¨ë„ë¡œ</button>
        <button class="tab-btn" onclick="openTab('roulette')">ğŸ² ë¹ ë¥¸ê²°ì •!</button>
        <button class="tab-btn" onclick="openTab('cookie')">ğŸ¥  í¬ì¶˜ì¿ í‚¤</button>
        <button class="tab-btn" onclick="openTab('trash')">ğŸ—‘ï¸ ê¸°ì–µì‚­ì œ</button>
        <button class="tab-btn" onclick="openTab('breathe')">ğŸ§˜ ì¢€ ì‰¬ì~</button>
      </div>

      <div id="dday" class="tab-content active">
        <p style="margin:10px 0;">ëª©í‘œ ë‚ ì§œë¥¼ ì½•! ì°ì–´ë´</p>
        <input type="date" id="ddayDate" class="tool-input">
        <br>
        <button class="tool-btn" onclick="calcDday()">ì–¼ë§ˆë‚˜ ë‚¨ì•˜ì§€?</button>
        <div id="ddayResult" class="result-box"></div>
      </div>

      <div id="stopwatch" class="tab-content">
        <div style="margin-bottom:5px;">
          <button id="modeStudy" class="pomo-mode-btn active" onclick="setMode('study')">ğŸ”¥ ì—´ê³µ (25ë¶„)</button>
          <button id="modeRest" class="pomo-mode-btn" onclick="setMode('rest')">â˜• íœ´ì‹ (5ë¶„)</button>
        </div>
        <div class="timer-display" id="timeDisplay">25:00</div>
        <div id="timerMessage" style="height:20px; color:#ff6b6b; font-weight:bold; margin-bottom:5px;"></div>
        <button class="tool-btn" onclick="startTimer()">â–¶ ì‹œì‘</button>
        <button class="tool-btn" style="background:#ddd;" onclick="pauseTimer()">â¸ ì¼ì‹œì •ì§€</button>
        <button class="tool-btn" style="background:#fff;" onclick="resetTimer()">ğŸ”„ ë¦¬ì…‹</button>
      </div>

      <div id="roulette" class="tab-content">
        <p style="margin:5px 0;">ê³ ë¯¼ë  ë• ìš´ëª…ì— ë§¡ê²¨!</p>
        <input type="text" id="rouletteInput" class="tool-input" placeholder="ì˜ˆ: ì§œì¥, ì§¬ë½•, ë³¶ìŒë°¥">
        <br>
        <button class="tool-btn" onclick="spinRoulette()">ê³¨ë¼ì¤˜!</button>
        <div id="rouletteResult" class="result-box"></div>
      </div>

      <div id="cookie" class="tab-content">
        <p style="margin:5px 0;">ì˜¤ëŠ˜ì˜ í–‰ìš´ì„ í™•ì¸í•´ë´!</p>
        <div style="font-size: 50px; cursor:pointer; transition:0.2s;" onclick="openCookie()" id="cookieIcon">ğŸ¥ </div>
        <button class="tool-btn" onclick="openCookie()">ì¿ í‚¤ ì—´ê¸°</button>
        <div id="cookieResult" class="result-box" style="font-size: 18px; margin-top:10px; word-break: keep-all; line-height:1.3;">
          ì¿ í‚¤ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”!
        </div>
      </div>

      <div id="trash" class="tab-content">
        <p style="margin:5px 0;">ì“°ì˜ë°ê¸° ì—†ëŠ” ê±±ì •ì€ ì €ë¦¬ê°€!</p>
        <input type="text" id="trashInput" class="tool-input" placeholder="ì—¬ê¸°ì— ê±±ì •ì„ ì ì–´" style="font-size:16px;">
        <br>
        <button class="tool-btn" style="background:#ffadad;" onclick="crushWorry()">ğŸ—‘ï¸ ë²„ë¦¬ê¸°</button>
        <div id="trashResult" class="result-box" style="font-size:20px;"></div>
      </div>

      <div id="breathe" class="tab-content">
        <p id="breatheText" style="margin:5px 0;">ë§ˆìŒì˜ í‰í™”ë¥¼...</p>
        <div id="breatheCircle" class="breathe-circle">í›„~</div>
        <button class="tool-btn" onclick="toggleBreathe()">ì‹œì‘/ì •ì§€</button>
      </div>
    </div>
  </div>
</div>

<script>
// ì‚¬ìš©ì ëª…ë‹¨
const USERS=[
"ì—°ìš°","ë¯¼ì¤€ì´","ê°€ìœ¤ì´","ë™ê· ì´","ì„œí˜„ì´","ì£¼ì€ì´","í˜„ìš°",
"ë™êµ­ì´","ì†Œìœ¤ì´","ì‹œì˜¨ì´","ì‹œìš°","ì§€ì—°ì´","ì§€ë¯¼ì´","ìƒí˜„ì´","ìˆ˜ì•„",
"ì¸ì„±ì´","ë‹¤í•´","ìŠ¹í›ˆì´","ìœ¤ì§€","ì£¼ì•„","ì¤€í¬","ì§€íš¨","íƒœí˜¸",
"í˜„ì¤€ì´","ì„œí˜„ì´","ì±„ì›ì´","ìœ¤í•˜","ì¸í˜•ì´","ë³‘ìš±ì´","ì‹œìœ¤ì´","ì¤€í˜ì´",
"ê°€í˜„ì´","í˜„ìš°","ì§€ìœ¤ì´", "ìŠˆë‹ˆ", "ìŠ¹ë¯¼ì´"
];

// ìŠ¤í¬ë¦½íŠ¸ URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykDuVl_i-7yEwy3eSZaoc_2A4kShtI51tQxmMcwYofLjOv1ygzhHUR162egRNgu_Aq/exec";

let isMoving = false;
const p = new URLSearchParams(location.search);
const u = parseInt(p.get("u"), 10) || 1;
const userName = USERS[u-1] || "ë°©ë¬¸ì"; 

document.getElementById("title").textContent = `${userName}ì˜ ê³ ë¯¼ ì ‘ìˆ˜!`;

// â˜…â˜…â˜… íŒì—…(ëª¨ë‹¬) ì œì–´ â˜…â˜…â˜…
function openToolModal() {
  document.getElementById("toolModal").style.display = "flex";
}
function closeToolModal() {
  document.getElementById("toolModal").style.display = "none";
}
function closeToolModalOutside(event) {
  if (event.target.id === "toolModal") {
    closeToolModal();
  }
}

// â˜…â˜…â˜… ë„êµ¬í•¨ ê¸°ëŠ¥ í†µí•© â˜…â˜…â˜…

// 0. íƒ­ ì „í™˜
function openTab(tabName) {
  const contents = document.getElementsByClassName("tab-content");
  for(let i=0; i<contents.length; i++) contents[i].classList.remove("active");
  
  const btns = document.getElementsByClassName("tab-btn");
  for(let i=0; i<btns.length; i++) btns[i].classList.remove("active");

  document.getElementById(tabName).classList.add("active");
  event.target.classList.add("active");
}

// 1. D-Day
function calcDday() {
  const input = document.getElementById("ddayDate").value;
  if(!input) { alert("ë‚ ì§œë¥¼ ì„ íƒí•´ì¤˜!"); return; }
  
  const target = new Date(input);
  const today = new Date();
  today.setHours(0,0,0,0);
  
  const diff = target - today;
  const dayDiff = Math.ceil(diff / (1000 * 60 * 60 * 24));
  
  const resultBox = document.getElementById("ddayResult");
  if(dayDiff > 0) resultBox.textContent = `D - ${dayDiff}`;
  else if(dayDiff === 0) resultBox.textContent = `D - Day!`;
  else resultBox.textContent = `D + ${Math.abs(dayDiff)}`;
}

// 2. ë½€ëª¨ë„ë¡œ íƒ€ì´ë¨¸ (ë¡œì§ êµì²´ë¨)
let timerId = null;
let timeLeft = 25 * 60; // ê¸°ë³¸ 25ë¶„ (ì´ˆ ë‹¨ìœ„)
let currentMode = 'study'; // study or rest
let isRunning = false;

function updateTimerDisplay() {
  const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
  const s = (timeLeft % 60).toString().padStart(2,'0');
  const display = document.getElementById("timeDisplay");
  display.textContent = `${m}:${s}`;
  
  // ëª¨ë“œì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½
  if(currentMode === 'study') display.style.color = "#ff6b6b"; // ë¹¨ê°•
  else display.style.color = "#4ecdc4"; // ë¯¼íŠ¸ìƒ‰ (íœ´ì‹)
}

function setMode(mode) {
  pauseTimer(); // ëª¨ë“œ ë³€ê²½ ì‹œ ì¼ë‹¨ ì •ì§€
  currentMode = mode;
  
  // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
  document.getElementById("modeStudy").classList.remove("active");
  document.getElementById("modeRest").classList.remove("active");
  
  if(mode === 'study') {
    timeLeft = 25 * 60;
    document.getElementById("modeStudy").classList.add("active");
    document.getElementById("timerMessage").textContent = "ğŸ”¥ ì—´ê³µ ëª¨ë“œ ì¥ì „!";
  } else {
    timeLeft = 5 * 60;
    document.getElementById("modeRest").classList.add("active");
    document.getElementById("timerMessage").textContent = "â˜• ë‹¬ì½¤í•œ íœ´ì‹ ì‹œê°„";
  }
  updateTimerDisplay();
}

function startTimer() {
  if(isRunning) return;
  isRunning = true;
  document.getElementById("timerMessage").textContent = currentMode === 'study' ? "ì§‘ì¤‘! ì§‘ì¤‘!" : "í‘¹ ì‰¬ì~";
  
  timerId = setInterval(() => {
    if(timeLeft > 0) {
      timeLeft--;
      updateTimerDisplay();
    } else {
      // ì‹œê°„ ì¢…ë£Œ
      clearInterval(timerId);
      isRunning = false;
      timerId = null;
      if(currentMode === 'study') {
        alert("25ë¶„ ê³µë¶€ ë! ì´ì œ 5ë¶„ ì‰´ê¹Œ?");
        setMode('rest');
      } else {
        alert("íœ´ì‹ ë! ë‹¤ì‹œ ê³µë¶€í•´ë³¼ê¹Œ?");
        setMode('study');
      }
    }
  }, 1000);
}

function pauseTimer() {
  clearInterval(timerId);
  isRunning = false;
  timerId = null;
  document.getElementById("timerMessage").textContent = "ì ì‹œ ë©ˆì¶¤...";
}

function resetTimer() {
  pauseTimer();
  // í˜„ì¬ ëª¨ë“œì— ë§ì¶° ì‹œê°„ ì´ˆê¸°í™”
  if(currentMode === 'study') setMode('study');
  else setMode('rest');
}

// 3. ê²°ì •ì˜ ì‹ 
function spinRoulette() {
  const raw = document.getElementById("rouletteInput").value;
  if(!raw.trim()) { alert("í•­ëª©ì„ ì ì–´ì¤˜!"); return; }
  const list = raw.split(",").map(s => s.trim()).filter(s => s !== "");
  if(list.length < 1) return;

  const resultBox = document.getElementById("rouletteResult");
  resultBox.textContent = "ë‘êµ¬ë‘êµ¬...";
  
  setTimeout(() => {
    const randomPick = list[Math.floor(Math.random() * list.length)];
    resultBox.textContent = `ğŸ‘‰ ${randomPick} !`;
  }, 1000);
}

// 4. í¬ì¶˜ì¿ í‚¤ (50ê°œ)
const FORTUNES = [
  "ì˜¤ëŠ˜ì€ ì°ì‹ ì´ ê°•ë¦¼í•  ìš´ëª…! ì—°í•„ êµ´ë ¤ë„ ì •ë‹µ ğŸ¯", "ì§€ê¸ˆ ë”± 10ë¶„ë§Œ ë” ê³µë¶€í•˜ë©´, ê·¸ê²Œ ì‹œí—˜ì— ë‚˜ì˜¨ë‹¤! ğŸ“š",
  "ìˆ˜í–‰í‰ê°€ ë§Œì ì˜ ê¸°ìš´ì´ ë„¤ ì£¼ìœ„ë¥¼ ê°ì‹¸ê³  ìˆì–´ âœ¨", "ê±±ì • ë§ˆ, ë„¤ ë‡ŒëŠ” ìƒê°ë³´ë‹¤ ë˜‘ë˜‘í•´. ë¯¿ì–´ë´! ğŸ§ ",
  "ì¡¸ë¦¬ì§€? ì§€ê¸ˆ ìë©´ ê¿ˆì„ ê¾¸ì§€ë§Œ, ì§€ê¸ˆ í•˜ë©´ ê¿ˆì„ ì´ë¤„ (ë†ë‹´ì´ê³  5ë¶„ë§Œ ìì) ğŸ’¤", "ì˜¤ëŠ˜ ìˆ˜ì—… ì‹œê°„ì— ìŒ¤ì´ë‘ ëˆˆ ë§ˆì£¼ì¹˜ë©´ ì¢‹ì€ ì¼ ìƒê¹€! ğŸ‘€",
  "ëª¨ë¥´ëŠ” ë¬¸ì œë„ ì •ë‹µì„ í”¼í•´ê°€ì§„ ëª»í•  ê±°ì•¼ ğŸ’ª", "ì˜¤ëŠ˜ë”°ë¼ í•„ê¸°ê°ì´ ì˜ˆìˆ ì¸ë°? ê³µë¶€ ì˜ë  ê°! ğŸ“",
  "ì•¼ì ì‹œê°„ì— ì§‘ì¤‘ë ¥ ë ˆì „ë“œ ì°ì„ ì˜ˆì • ğŸ”¥", "ì„±ì í‘œë³´ë‹¤ ì¤‘ìš”í•œ ê±´ ë„ˆì˜ ë©˜íƒˆ! ê½‰ ì¡ì•„! ğŸ’–",
  "ì˜¤ëŠ˜ ê¸‰ì‹ ë©”ë‰´, ë„¤ê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ê±° ë‚˜ì˜¨ë‹¤! ğŸ±", "ë§¤ì ì— ê°€ë©´ 1+1 í–‰ìš´ì´ ê¸°ë‹¤ë¦´ì§€ë„? ğŸ¬",
  "ì£¼ë¨¸ë‹ˆë¥¼ ë’¤ì ¸ë´! ìŠê³  ìˆë˜ ì²œ ì›ì´ ë‚˜ì˜¬ ê±°ì•¼ ğŸ’¸", "ë°¥ ë¨¹ê³  ë°”ë¡œ ëˆ•ì§€ ë§ˆ... í•˜ì§€ë§Œ ëˆ„ìš°ë©´ ì²œêµ­ì´ê² ì§€? ğŸ›Œ",
  "ì˜¤ëŠ˜ë”°ë¼ ê¸‰ì‹ì‹¤ ê°€ëŠ” ë°œê±¸ìŒì´ ê°€ë²¼ìš¸ ê±°ì•¼ ğŸ—", "ì¹œêµ¬ í•œì…ë§Œ ì°¬ìŠ¤! ë§›ìˆëŠ” ê±¸ ì–»ì–´ë¨¹ê²Œ ë  ìš´ëª… ğŸ«",
  "ë‹¹ ë–¨ì–´ì§ˆ ì‹œê°„ì´ì•¼. ì§€ê¸ˆ ë°”ë¡œ ì´ˆì½œë¦¿ ì¶©ì „! ğŸ”‹", "ì˜¤ëŠ˜ ì•¼ì‹ì€ ì¹˜í‚¨ ê°ì´ë‹¤. ë¶€ëª¨ë‹˜ê»˜ ì• êµ ë¶€ë ¤ë´ ğŸ—",
  "ë¬¼ í•œ ì” ë§ˆì…”! í”¼ë¶€ê°€ ì¢‹ì•„ì§ˆ ê±°ì•¼ ğŸ’§", "ì˜¤ëŠ˜ ë¨¹ëŠ” ê±´ 0ì¹¼ë¡œë¦¬! ë§›ìˆê²Œ ë¨¹ìœ¼ë©´ ì‚´ ì•ˆ ìª„ ğŸ˜‹",
  "ê±°ìš¸ ë´ë´. ì˜¤ëŠ˜ë”°ë¼ ì™œ ì´ë ‡ê²Œ ì˜ˆë»(ì˜ìƒê²¼ì–´)? ğŸ˜", "ë„ˆì˜ ì•ë¨¸ë¦¬ ë³¼ë¥¨, ì˜¤ëŠ˜ í•˜ë£¨ ì¢…ì¼ ì™„ë²½ ìœ ì§€! ğŸ’‡â€â™€ï¸",
  "ì§€ë‚˜ê°€ë˜ ì¹œêµ¬ê°€ ë„ˆ ì³ë‹¤ë´„. ì˜¤ëŠ˜ ì¢€ ë¹›ë‚˜ëŠ”ë°? âœ¨", "ì¸ íƒ€ëŠ” ì‚¬ëŒ ìˆì–´? ì˜¤ëŠ˜ ì—°ë½ ì˜¨ë‹¤. í° ì˜ ë´ ğŸ“±",
  "ë„ˆì˜ ì›ƒëŠ” ì–¼êµ´ì— ì¹œêµ¬ë“¤ ê¸°ë¶„ë„ ì¢‹ì•„ì§ˆ ê±°ì•¼ ğŸ˜Š", "ì˜¤ëŠ˜ ì…ì€ ì˜· í•ì´ ì˜ˆìˆ ì¸ë°? ìì‹ ê° ê°€ì ¸! ğŸ‘•",
  "ê°‘ìê¸° ì¸ìƒìƒ· ê±´ì§ˆ ìˆ˜ ìˆìŒ. ì¹´ë©”ë¼ ì¼œë´ ğŸ“¸", "ë„ˆë¥¼ ëª°ë˜ ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒì´ ìˆì„ì§€ë„ ëª°ë¼ ğŸ’˜",
  "í”¼ë¶€ê°€ ê¿€í”¼ë¶€ë„¤! ì–´ì œ ë­ í–ˆì–´? ğŸ¯", "ì˜¤ëŠ˜ ë„ˆì˜ ë§¤ë ¥ ì§€ìˆ˜: í­ë°œ ì§ì „ ğŸ’£",
  "ì´ì–´í° ê½‚ìë§ˆì ë„¤ ìµœì• ê³¡ì´ ë‚˜ì˜¬ ê±°ì•¼ ğŸµ", "ì‹ í˜¸ë“±ì´ ë„¤ê°€ ê±´ë„ ë•Œ ë”± ì´ˆë¡ë¶ˆë¡œ ë°”ë€” ìš´ëª… ğŸš¦",
  "ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì™ ì§€ ëª¨ë“  ê²Œ ìˆ ìˆ  í’€ë¦´ ê²ƒ ê°™ì•„ ğŸ€", "ëœ»ë°–ì˜ ì¹­ì°¬ì„ ë“£ê²Œ ë  ê±°ì•¼. ê¸°ë¶„ ìµœê³ ! ğŸ‘",
  "ë°”ë‹¥ì„ ì˜ ë´. ëˆ ì£¼ìš¸ ìˆ˜ë„ ìˆì–´ (ì§„ì§œë¡œ!) ğŸ’°", "ì˜¤ëœë§Œì— ë°˜ê°€ìš´ ì¹œêµ¬ì—ê²Œ ì—°ë½ì´ ì˜¬ ê±°ì•¼ ğŸ“",
  "ì˜¤ëŠ˜ì˜ ëŸ­í‚¤ ì»¬ëŸ¬ëŠ” 'ë…¸ë‘'! ì£¼ë³€ì„ ì°¾ì•„ë´ ğŸ’›", "í•˜ëŠ˜ì„ í•œë²ˆ ë´. êµ¬ë¦„ ëª¨ì–‘ì´ ë„ˆí•œí…Œ ì¸ì‚¬í• ê±¸? â˜ï¸",
  "ìƒì–´ë²„ë ¸ë˜ ë¬¼ê±´ì„ ì°¾ê²Œ ë ì§€ë„ ëª°ë¼ ğŸ”", "ì§‘ ê°€ëŠ” ê¸¸ì— ê·€ì—¬ìš´ ê³ ì–‘ì´ë¥¼ ë§ˆì£¼ì¹  ìš´ëª… ğŸ±",
  "ê´œì°®ì•„, ë§í•œ ê²ƒ ê°™ì•„ë„ ë‹¤ ê³¼ì •ì¼ ë¿ì´ì•¼ ğŸŒ±", "ë„Œ ì¡´ì¬ ìì²´ë¡œ ì´ë¯¸ í›Œë¥­í•´. ê¸°ì£½ì§€ ë§ˆ! ğŸŒˆ",
  "ë„ˆë¬´ ì• ì“°ì§€ ë§ˆ. ì˜¤ëŠ˜ì€ ëŒ€ì¶© ì‚´ì•„ë„ ê´œì°®ì•„ ğŸ˜Œ", "í˜ë“¤ë©´ ì ê¹ ì‰¬ì–´ê°€ë„ ë¼. ì‰¼í‘œ(,)ê°€ í•„ìš”í•´.",
  "ë„ˆì˜ ë…¸ë ¥ì€ ë°°ì‹ í•˜ì§€ ì•Šì•„. ì¡°ê¸ˆë§Œ ë” ë²„í‹°ì ğŸ‘Š", "ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³ í–ˆì–´. ë„ˆ ì§„ì§œ ë©‹ìˆë‹¤! ğŸ‘",
  "ê±±ì •ì€ ì“°ë ˆê¸°í†µì—, í–‰ë³µì€ ë„¤ ì£¼ë¨¸ë‹ˆì—! ğŸ—‘ï¸", "ë‚¨ë“¤ì´ ë­ë¼ë“  ë„Œ ë„ˆë§Œì˜ ì†ë„ë¡œ ê°€ê³  ìˆì–´ ğŸ¢",
  "ì§€ê¸ˆ í˜ë“  ê±´, ë‚˜ì¤‘ì— ëŒ€ë°• í„°ì§€ë ¤ê³  ê·¸ëŸ¬ëŠ” ê±°ì•¼ ğŸ", "ë³´ì¼€ìƒ˜ì€ ì–¸ì œë‚˜ ë„¤ í¸ì´ì•¼! ì•Œì§€? íŒŒì´íŒ…! â¤ï¸"
];
function openCookie() {
  const resultBox = document.getElementById("cookieResult");
  const icon = document.getElementById("cookieIcon");
  
  icon.style.transform = "rotate(20deg)";
  setTimeout(() => icon.style.transform = "rotate(-20deg)", 100);
  setTimeout(() => icon.style.transform = "rotate(20deg)", 200);
  setTimeout(() => icon.style.transform = "rotate(0deg)", 300);

  resultBox.textContent = "ë‘ê·¼ë‘ê·¼...";
  setTimeout(() => {
    const msg = FORTUNES[Math.floor(Math.random() * FORTUNES.length)];
    resultBox.textContent = `"${msg}"`;
    icon.textContent = "âœ¨";
    setTimeout(() => icon.textContent = "ğŸ¥ ", 2000);
  }, 500);
}

// 5. ê±±ì • ì‚­ì œ (ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼)
function crushWorry() {
  const input = document.getElementById("trashInput");
  const resultBox = document.getElementById("trashResult");
  if(!input.value.trim()) { alert("ê±±ì •ì„ ì ì–´ì•¼ ë²„ë¦¬ì§€!"); return; }

  // ì• ë‹ˆë©”ì´ì…˜ ì ìš©
  input.style.transition = "all 1s ease-in";
  input.style.transform = "scale(0) rotate(720deg) skew(20deg)";
  input.style.opacity = "0";

  setTimeout(() => {
    // ì´ˆê¸°í™” ë° ê²°ê³¼ í‘œì‹œ
    input.value = "";
    input.style.transition = "none";
    input.style.transform = "none";
    input.style.opacity = "1";
    resultBox.textContent = "ê±±ì •ì´ ì‚¬ë¼ì¡Œì–´! ğŸƒ";
    setTimeout(() => { resultBox.textContent = ""; }, 2000);
  }, 1000);
}

// 6. ë© ë•Œë¦¬ê¸° (í˜¸í¡)
let breatheInterval = null;
function toggleBreathe() {
  const circle = document.getElementById("breatheCircle");
  const text = document.getElementById("breatheText");
  
  if(breatheInterval) {
    // ì •ì§€
    clearInterval(breatheInterval);
    breatheInterval = null;
    circle.style.animation = "none";
    circle.textContent = "í›„~";
    text.textContent = "ë§ˆìŒì˜ í‰í™”ë¥¼...";
  } else {
    // ì‹œì‘
    text.textContent = "ì›ì— ë§ì¶° í˜¸í¡í•´ë´";
    circle.style.animation = "breatheAnim 6s infinite ease-in-out";
    
    let isInhale = true;
    circle.textContent = "ë“¤ì´ë§ˆì…”";
    
    breatheInterval = setInterval(() => {
      isInhale = !isInhale;
      circle.textContent = isInhale ? "ë“¤ì´ë§ˆì…”" : "ë‚´ì‰¬ì–´";
    }, 3000); // ì• ë‹ˆë©”ì´ì…˜ ì£¼ê¸°ì˜ ì ˆë°˜
  }
}

// --- ë©”ì¸ ê¸°ëŠ¥ (ê³ ë¯¼ í•´ê²°) ---
function sendAndGo(){
  const worryText = document.getElementById("worryInput").value;
  const btn = document.getElementById("sendBtn");

  if(!worryText.trim()){
      alert("ê³ ë¯¼ì„ ì ì–´ì•¼ í•´ê²°í•´ì£¼ì§€!");
      return;
  }
  btn.disabled = true;
  btn.textContent = "ê³ ë¯¼ í•´ê²° ì¤‘...";
  setTimeout(() => { goNextPage(); }, 1500);

  fetch(SCRIPT_URL, {
    method: "POST", mode: "no-cors", 
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name: userName, worry: worryText }),
  })
  .then(() => { goNextPage(); })
  .catch((error) => { console.error("Error:", error); goNextPage(); });
}

function goNextPage(){
  if (isMoving) return; 
  isMoving = true;
  const text = document.getElementById("worryInput").value; 
  let min = 0; let max = 19; 
  const KEYWORDS = {
    study: ["ê³µë¶€","ì‹œí—˜","ì„±ì ","ë“±ê¸‰","ìˆ˜ëŠ¥","ëª¨ê³ ","ëŒ€í•™","í•©ê²©","ë¶ˆí•©ê²©","1ë“±ê¸‰","ìˆ˜í•™","ì˜ì–´","êµ­ì–´","ë§í•¨"],
    relation: ["ì¹œêµ¬","ì‹¸ì›€","ì ˆêµ","ë’·ë‹´","ì—°ì• ","ì¢‹ì•„","ê³ ë°±","ì¸","ì´ë³„","í—¤ì–´ì§","ê°€ì¡±","ì—„ë§ˆ","ì”ì†Œë¦¬"],
    food: ["ë°°ê³ ","ë¨¹","ë§›","ê¸‰ì‹","ë§¤ì ","ë¼ë©´","ë‹¤ì´ì–´íŠ¸","ì‚´","ëª¸ë¬´ê²Œ","ë¼ì§€"],
    money: ["ëˆ","ìš©ëˆ","ì§€ê°‘","ì•Œë°”","ë¹„ì‹¸","ì„¸ì¼","ì•„ì´í°","ì—ì–´íŒŸ","ì·¨ì—…","ê¿ˆ","ì§„ë¡œ"]
  };
  const hasKeyword = (list) => list.some(word => text.includes(word));
  if (hasKeyword(KEYWORDS.study)) { min = 20; max = 39; } 
  else if (hasKeyword(KEYWORDS.relation)) { min = 40; max = 59; } 
  else if (hasKeyword(KEYWORDS.food)) { min = 60; max = 79; } 
  else if (hasKeyword(KEYWORDS.money)) { min = 80; max = 99; }
  
  const a = Math.floor(Math.random() * (max - min + 1)) + min;
  location.href = `answer.html?u=${u}&a=${a}`;
}

const hints = [
  "ì„±ì ì´ ì•ˆ ì˜¬ë¼ì„œ ê³ ë¯¼ì´ì•¼? ã… ã… ", "ì¹œêµ¬ë‘ ì‹¸ì› ëŠ”ë° í™”í•´í•˜ê³  ì‹¶ì–´?", "ì˜¤ëŠ˜ ê¸‰ì‹ ë©”ë‰´ê°€ ë§›ì—†ëŠ” ê±°ë¼ ìš°ìš¸í•´?",
  "ì‚¬ê³  ì‹¶ì€ ë¬¼ê±´ì´ ìˆì–´ì„œ ê³ ë¯¼ì´ì•¼?", "ì§ì‚¬ë‘ ë•Œë¬¸ì— ì ì´ ì•ˆ ì™€?", "ëŒ€í•™ ì–´ë”” ê°€ì•¼ í• ì§€ ë§‰ë§‰í•´?",
  "ë¶€ëª¨ë‹˜ ì”ì†Œë¦¬ ë•Œë¬¸ì— í˜ë“¤ì–´?", "ë‹¤ì´ì–´íŠ¸ê°€ ëœ»ëŒ€ë¡œ ì•ˆ ë¼?", "ìš”ì¦˜ ìê¾¸ ë‚¨ì´ë‘ ë¹„êµí•˜ê²Œ ë¼?",
  "ìš”ì¦˜ ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ê³  ë¬´ê¸°ë ¥í•´?", "ë©´ì ‘ì´ë‚˜ ìì†Œì„œ ë•Œë¬¸ì— ê±±ì •ì´ì•¼?", "ì‹œí—˜ ë‚  ì‹¤ìˆ˜í• ê¹Œ ë´ ë¶ˆì•ˆí•´?",
  "ì£¼ë³€ì—ì„œ ë‚˜ë§Œ ë’¤ì²˜ì§€ëŠ” ê²ƒ ê°™ì•„?", "ì£¼ë§ì— ë­ í•˜ê³  ë†€ì§€ ê³ ë¯¼ì´ì•¼?", "ê³ ë“±í•™êµ ì„ ìƒë‹˜í•œí…Œ ì„œìš´í•œ ê±° ìˆì–´?",
  "ë°˜ ì¹œêµ¬ë“¤ì´ë‘ ì–´ìƒ‰í•´ì„œ ê³ ë¯¼ì´ì•¼?", "ìš”ì¦˜ ë°¤ì— ì ì´ ì˜ ì•ˆ ì™€?", "ë‚´ ê¿ˆì´ ë­”ì§€ ì•„ì§ ëª¨ë¥´ê² ì–´?",
  "ê·¸ëƒ¥ ì•„ë¬´í•œí…Œë‚˜ ë­ë¼ë„ í„¸ì–´ë†“ê³  ì‹¶ì–´?", "ì§€ê¸ˆ ë‹¹ì¥ ì–´ë””ë¡ ê°€ ë– ë‚˜ê³  ì‹¶ì–´?"
];
const worryInput = document.getElementById("worryInput");
function rotatePlaceholder() {
  const randomIdx = Math.floor(Math.random() * hints.length);
  worryInput.placeholder = `${userName}~ ì˜ì§€ë‚´ì§€? ê·¼ë° ${hints[randomIdx]}\nì—¬ê¸°ì— ê³ ë¯¼ì„ ì ì–´ë´ ë³´ì¼€ìƒ˜ì´ í•´ê²°í•´ ì¤„ê²Œ!`;
}
rotatePlaceholder();
setInterval(rotatePlaceholder, 5000); 
  
</script>
</body>
</html>
