<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ë³´ì¼€ìƒ˜ì˜ ê³ ë¯¼ìƒë‹´ì†Œ</title>
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
<style>
/* 1. ì „ì²´ ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  font-family: 'Gamja Flower', cursive;
  background-color: #fff9c4;
  background-image: radial-gradient(#ddd 1px, transparent 1px);
  background-size: 20px 20px;
  display: flex;
  justify-content: center;
  color: #333;
}
.wrap {
  max-width: 400px;
  width: 100%;
  padding: 30px;
  text-align: center;
  box-sizing: border-box;
  padding-bottom: 80px; /* ì•„ë˜ ì—¬ë°± í™•ë³´ */
}
h1 {
  font-size: 32px;
  margin-top: 50px;
  text-shadow: 2px 2px 0px #fff;
}
p {
  font-size: 20px;
  margin: 10px 0 30px;
}

/* 2. ì…ë ¥ì°½ & ë²„íŠ¼ ê¾¸ë¯¸ê¸° */
textarea {
  width: 100%;
  height: 140px;
  border: 3px solid #000;
  border-radius: 15px;
  padding: 15px;
  font-size: 20px;
  font-family: 'Gamja Flower', cursive;
  resize: none;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
  outline: none;
  box-sizing: border-box;
}
textarea:focus {
  background-color: #fff;
  box-shadow: 5px 5px 0px #ff6b6b;
}
button {
  margin-top: 25px;
  width: 100%;
  padding: 15px;
  font-size: 24px;
  font-family: 'Gamja Flower', cursive;
  border: 3px solid #000;
  border-radius: 50px;
  background: #ff6b6b;
  color: #fff;
  cursor: pointer;
  box-shadow: 4px 4px 0px #000;
  transition: 0.1s;
}
button:active {
  transform: translate(4px, 4px);
  box-shadow: 0px 0px 0px #000;
}
button:disabled {
  background: #ccc;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.small {
  margin-top: 20px;
  font-size: 16px;
  color: #777;
}

/* 3. ë°©ëª…ë¡ ì˜ì—­ ìŠ¤íƒ€ì¼ */
.guestbook-area {
  margin-top: 60px;
  border-top: 3px dashed #bbb; /* ì ì„  */
  padding-top: 40px;
  text-align: center;
}
.guestbook-area h2 {
  font-family: 'Gamja Flower', cursive;
  font-size: 26px;
  color: #555;
  margin-bottom: 20px;
  background: #fff;
  display: inline-block;
  padding: 5px 15px;
  border-radius: 20px;
  border: 2px solid #ddd;
}

/* íŒ¨ë“¤ë › í”„ë ˆì„ */
.padlet-frame {
  width: 100%;
  height: 500px;
  border: 3px solid #000;
  border-radius: 15px;
  overflow: hidden;
  background: #fff;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
}
.padlet-frame iframe {
  width: 100%;
  height: 100%;
  border: none;
  display: block; /* ê³µë°± ì œê±° */
}
</style>
</head>
<body>
<div class="wrap">
  <h1 id="title"></h1>
  <p>ê³ ë¯¼ ìˆêµ¬ë‚˜? ê±±ì • ë§ˆ ìƒ˜ì´ í•´ê²°í•¨!</p>
  
  <textarea id="worryInput" placeholder="ì—¬ê¸°ì— ê³ ë¯¼ì„ ì ìœ¼ë©´ í•œë°©ì— í•´ê²°ë˜ë‹ˆ ê±±ì •ë§ë¼êµ¬~"></textarea>
  <button id="sendBtn" onclick="sendAndGo()">ë³´ì¼€ìƒ˜ì˜ ì¼íƒ€ ê³ ë¯¼ í•´ê²°!</button>
  <div class="small">í‰ìƒ ë¬´ë£Œì§€ë§Œ í•˜ë£¨ í•œ ë²ˆë§Œ ê°€ëŠ¥ (ì‹ ì¤‘ í•„ìš”)</div>

  <div class="guestbook-area">
    <h2>ğŸ“¢ 3í•™ë…„ 17ë°˜ ìˆ˜ë‹¤ë°©!</h2>
    <div class="padlet-frame">
      <iframe src="https://padlet.com/embed/otdrqaeh2g0b4mug" frameborder="0" allow="camera;microphone;geolocation;display-capture;clipboard-write"></iframe>
    </div>
  </div>

</div>

<script>
// ì‚¬ìš©ì ëª…ë‹¨
const USERS=[
"ì—°ìš°","ë¯¼ì¤€ì´","ê°€ìœ¤ì´","ë™ê· ì´","ì„œí˜„ì´","ì£¼ì€ì´","í˜„ìš°",
"ë™êµ­ì´","ì†Œìœ¤ì´","ì‹œì˜¨ì´","ì‹œìš°","ì§€ì—°ì´","ì§€ë¯¼ì´","ìƒí˜„ì´","ìˆ˜ì•„",
"ì¸ì„±ì´","ë‹¤í•´","ìŠ¹í›ˆì´","ìœ¤ì§€","ì£¼ì•„","ì¤€í¬","ì§€íš¨","íƒœí˜¸",
"í˜„ì¤€ì´","ì„œí˜„ì´","ì±„ì›ì´","ìœ¤í•˜","ì¸í˜•ì´","ë³‘ìš±ì´","ì‹œìœ¤ì´","ì¤€í˜ì´",
"ê°€í˜„ì´","í˜„ìš°","ì§€ìœ¤ì´", "ìŠˆë‹ˆ"
];

// ìŠ¤í¬ë¦½íŠ¸ URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykDuVl_i-7yEwy3eSZaoc_2A4kShtI51tQxmMcwYofLjOv1ygzhHUR162egRNgu_Aq/exec";

// ë©ˆì¶¤ ë°©ì§€ìš© í”Œë˜ê·¸
let isMoving = false;

// URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬
const p = new URLSearchParams(location.search);
const u = parseInt(p.get("u"), 10) || 1;
const userName = USERS[u-1] || "ë°©ë¬¸ì"; 

// ì œëª© ì„¤ì •
document.getElementById("title").textContent = `${userName}ì˜ ê³ ë¯¼ ì ‘ìˆ˜!`;

// â˜…â˜…â˜… ì´ˆê°•ë ¥ í‚¤ì›Œë“œ ì‚¬ì „ (ì—¬ê¸°ì— ë‹¨ì–´ë“¤ì´ ë“¤ì–´ìˆìŠµë‹ˆë‹¤) â˜…â˜…â˜…
const KEYWORDS = {
  // 1. í•™ì—…/ì‹œí—˜ (ê³µë¶€, ì„±ì , ì…ì‹œ, í•™êµìƒí™œ) -> 20~39ë²ˆ
  study: [
    "ê³µë¶€", "ì‹œí—˜", "ì„±ì ", "ë“±ê¸‰", "ë‚´ì‹ ", "ìˆ˜ëŠ¥", "ëª¨ê³ ", "ëª¨ì˜ê³ ì‚¬", "í•™í‰",
    "ì¤‘ê°„ê³ ì‚¬", "ê¸°ë§ê³ ì‚¬", "ìˆ˜í–‰", "ìˆ˜í–‰í‰ê°€", "ìª½ì§€ì‹œí—˜", "ë“£ê¸°í‰ê°€", "ì„œìˆ í˜•",
    "ì„¸íŠ¹", "ìƒê¸°ë¶€", "ìì†Œì„œ", "ì…ì‹œ", "ìˆ˜ì‹œ", "ì •ì‹œ", "ëŒ€í•™", "ëŒ€í•™êµ", "ìº í¼ìŠ¤",
    "ì¸ì„œìš¸", "ì§€ê±°êµ­", "í•©ê²©", "ë¶ˆí•©ê²©", "ì˜ˆë¹„", "ê´‘íƒˆ", "ì¬ìˆ˜", "ì‚¼ìˆ˜", "ë°˜ìˆ˜",
    "ìí‡´", "ê²€ì •ê³ ì‹œ", "íœ´í•™", "ì „í•™", "ë‹´ì„", "ìŒ¤", "ì„ ìƒë‹˜", "êµë¬´ì‹¤", "í•™êµ",
    "ë°˜ì¥", "ë¶€ë°˜ì¥", "í•™ìƒíšŒ", "ë™ì•„ë¦¬", "ììŠµ", "ì•¼ì", "ì„ì‹", "í•™ì›", "ê³¼ì™¸",
    "ì¸ê°•", "ë…ì„œì‹¤", "ìŠ¤ì¹´", "ìŠ¤í„°ë””ì¹´í˜", "ë„ì„œê´€", "ë°¤ìƒ˜", "ë²¼ë½ì¹˜ê¸°", "ì˜¬ë°±",
    "1ë“±ê¸‰", "9ë“±ê¸‰", "ê³¼ëª©", "êµ­ì–´", "ìˆ˜í•™", "ì˜ì–´", "ì‚¬íƒ", "ê³¼íƒ", "í•œêµ­ì‚¬",
    "ë§í•¨", "ë§í–ˆ", "ì¡°ì§", "ì°ì‹ ", "ì§‘ì¤‘", "ì¡¸ë ¤", "ì ì™€", "ë¹¡ê³µ", "ì—´ê³µ", "ì¦ê³µ",
    "í•„ê¸°", "ë…¸íŠ¸", "ë¬¸ì œì§‘", "ìˆ", "ë§ˆí”Œ", "ìì´", "ìˆ˜íŠ¹", "ìˆ˜ì™„", "ì•„ì´íŒ¨ë“œ",
    "ìˆ™ì œ", "ê³¼ì œ", "ë°œí‘œ", "ì¡°ë³„", "íŒ€í”Œ", "ë²„ìŠ¤", "í”„ë¦¬ë¼ì´ë”", "ì „êµ", "1ë“±", "ê¼´ì°Œ"
  ],

  // 2. ê´€ê³„/ì—°ì• /ì¹œêµ¬ (ì¸ê°„ê´€ê³„, ê°ˆë“±, ê°ì •, ê°€ì¡±) -> 40~59ë²ˆ
  relation: [
    "ì¹œêµ¬", "ë² í”„", "ì°ì¹œ", "ì ˆì¹œ", "ë‹¨ì§", "ë¬´ë¦¬", "ì™•ë”°", "ì€ë”°", "ì „ë”°",
    "ì‹¸ì›€", "ë‹¤íˆ¼", "í™”í•´", "ì‚¬ê³¼", "ì†ì ˆ", "ì ˆêµ", "ì°¨ë‹¨", "ë¸”ë½", "ë’·ë‹´", "ì•ë‹´",
    "ê¼½", "ì‹œë¹„", "ë¬´ì‹œ", "ë°°ì‹ ", "ê±°ì§“ë§", "ì†Œë¬¸", "ì €ê²©", "ë°•ì œ", "ë¹„í˜¸ê°", "ê·¹í˜",
    "ì—°ì• ", "ì‚¬ë‘", "ì¢‹ì•„", "ê³ ë°±", "ì¸", "ì¸ë‚¨", "ì¸ë…€", "ì§ì‚¬ë‘", "ì§ë‚¨", "ì§ë…€",
    "ë‚¨ì¹œ", "ì—¬ì¹œ", "ì „ë‚¨ì¹œ", "ì „ì—¬ì¹œ", "ì´ë³„", "í—¤ì–´ì§", "ì°¨ì„", "ëª¨ì†”", "ì»¤í”Œ",
    "ë°ì´íŠ¸", "ê¸°ë…ì¼", "ì„ ë¬¼", "í¸ì§€", "ë””ì— ", "DM", "í˜ë©”", "ì¹´í†¡", "ì¹¼ë‹µ", "ì½ì”¹",
    "ì•ˆì½ì”¹", "í”„ì‚¬", "ë°°ì‚¬", "ìƒë©”", "ìŠ¤í† ë¦¬", "ì¸ìŠ¤íƒ€", "ì¢‹ì•„ìš”", "íŒ”ë¡œìš°", "ì–¸íŒ”",
    "ë§íŒ”", "ë¹„ê³„", "ë¶€ê³„", "ì—¼íƒ", "ì—°ë½", "ê°€ì¡±", "ì—„ë§ˆ", "ì•„ë¹ ", "ë¶€ëª¨ë‹˜", "ì—„ë¹ ",
    "ë™ìƒ", "ì–¸ë‹ˆ", "ëˆ„ë‚˜", "ì˜¤ë¹ ", "í˜•", "ë‚¨ë§¤", "ìë§¤", "í˜•ì œ", "ì”ì†Œë¦¬", "ê°€ì¶œ",
    "ì™¸ë¡œì›€", "ìš°ìš¸", "ì„œìš´", "ì§œì¦", "ì§ˆíˆ¬", "ë¶€ëŸ¬ì›€", "ìª½íŒ”ë¦¼", "í‘ì—­ì‚¬", "ëˆˆì¹˜"
  ],

  // 3. ìŒì‹/ê±´ê°•/ì™¸ëª¨ (ì‹ìš•, ë‹¤ì´ì–´íŠ¸, ì™¸ëª¨ ê³ ë¯¼) -> 60~79ë²ˆ
  food: [
    "ë°°ê³ ", "ë¨¹", "ë§›", "ì¡´ë§›", "ê¿€ë§›", "ë…¸ë§›", "ê¸‰ì‹", "í•™ì‹", "ë§¤ì ", "í¸ì˜ì ",
    "ë¼ë©´", "ì»µë¼ë©´", "ë¶ˆë‹­", "ë§ˆë¼", "ë§ˆë¼íƒ•", "ë§ˆë¼ìƒ¹ê¶ˆ", "íƒ•í›„ë£¨", "ë–¡ë³¶ì´", "ì—½ë–¡",
    "ì‹ ì „", "ì¹˜í‚¨", "í”¼ì", "í–„ë²„ê±°", "ë§¥ë‚ ", "ë§˜í„°", "ë¡¯ë°ë¦¬ì•„", "ë²„ê±°í‚¹", "ì„œë¸Œì›¨ì´",
    "ê³µì°¨", "ë²„ë¸”í‹°", "ìŠ¤ë²…", "ì•„ì•„", "ì¹´í˜", "ë””ì €íŠ¸", "ë¹µ", "ì¼€ì´í¬", "ì•„ì´ìŠ¤í¬ë¦¼", "ë² ë¼",
    "ê³ ê¸°", "ì‚¼ê²¹ì‚´", "ê³±ì°½", "ë‹­ë°œ", "ì•¼ì‹", "ë°°ë‹¬", "ë°°ë¯¼", "ìš”ê¸°ìš”", "í­ì‹", "ì…ë§›",
    "ë‹¤ì´ì–´íŠ¸", "ì‚´", "ì²´ì¤‘", "ëª¸ë¬´ê²Œ", "ë¼ì§€", "ëš±ëš±", "ë©¸ì¹˜", "í—¬ìŠ¤", "ìš´ë™", "ê·¼ìœ¡",
    "ë³µê·¼", "ì‹ë‹¨", "ìš”ìš”", "ë°°ë¶ˆ", "êº¼ì–µ", "ì–¼êµ´", "í”¼ë¶€", "ì—¬ë“œë¦„", "ë¾°ë£¨ì§€", "í™”ì¥",
    "í‹´íŠ¸", "ë Œì¦ˆ", "ìŒìˆ˜", "ì„±í˜•", "ë¨¸ë¦¬", "í—¤ì–´", "ì•ë¨¸ë¦¬", "í‚¤", "ê±°ìš¸", "ì…€ì¹´",
    "í”¼ê³¤", "ìˆ˜ë©´", "ì ", "ë¶ˆë©´ì¦", "ìƒë¦¬í†µ", "ë‘í†µ", "ë°°ì•„íŒŒ", "ê°ê¸°", "ëª¸ì‚´", "ì²´ë ¥"
  ],

  // 4. ëˆ/ë¯¸ë˜/ì§„ë¡œ (ê²½ì œ, ì¥ë˜í¬ë§, ì¸ìƒ ê³ ë¯¼) -> 80~99ë²ˆ
  money: [
    "ëˆ", "ìš©ëˆ", "ì„¸ë±ƒëˆ", "ì§€ê°‘", "í†µì¥", "í……ì¥", "ì €ê¸ˆ", "ì ê¸ˆ", "ì£¼ì‹", "ì½”ì¸",
    "ë¹„íŠ¸ì½”ì¸", "ì•Œë°”", "ì•„ë¥´ë°”ì´íŠ¸", "ì‹œê¸‰", "ì›”ê¸‰", "ì‚¬ì¥ë‹˜", "ê±°ì§€", "ë¹ˆí„¸í„°ë¦¬",
    "ë¶€ì", "ì¬ë²Œ", "ê±´ë¬¼ì£¼", "ë¡œë˜", "ë³µê¶Œ", "ë‹¹ì²¨", "í–‰ìš´", "í”Œë ‰ìŠ¤", "ì§€ë¦„ì‹ ", "ì‡¼í•‘",
    "ë¹„ì‹¸", "ì„¸ì¼", "í• ì¸", "ë¬´ë£Œ", "ê³µì§œ", "í™˜ë¶ˆ", "ì¤‘ê³ ", "ë‹¹ê·¼", "ë²ˆê°œ", "ì•„ì´í°",
    "ê°¤ëŸ­ì‹œ", "ì—ì–´íŒŸ", "ë²„ì¦ˆ", "ì•„ì´íŒ¨ë“œ", "íƒ­", "ë…¸íŠ¸ë¶", "ë§¥ë¶", "ì»´í“¨í„°", "ê²Œì„", "í˜„ì§ˆ",
    "ì§„ë¡œ", "ê¿ˆ", "ì¥ë˜í¬ë§", "ë¯¸ë˜", "ì·¨ì—…", "ì§ì—…", "ê³µë¬´ì›", "êµì‚¬", "ì˜ì‚¬", "ë³€í˜¸ì‚¬",
    "ì—°ì˜ˆì¸", "ì•„ì´ëŒ", "ë°°ìš°", "ê°€ìˆ˜", "ìœ íŠœë²„", "ìŠ¤íŠ¸ë¦¬ë¨¸", "ì¸í”Œë£¨ì–¸ì„œ", "ì„±ê³µ", "ì‹¤íŒ¨",
    "ì¸ìƒ", "ê°“ìƒ", "í˜„íƒ€", "ë©˜ë¶•", "ìŠ¬ëŸ¼í”„", "ì–´ë¥¸", "ì„±ì¸", "20ì‚´", "ë¯¼ì¦", "ë©´í—ˆ", "ì—¬í–‰"
  ]
};

function sendAndGo(){
  const worryText = document.getElementById("worryInput").value;
  const btn = document.getElementById("sendBtn");

  if(!worryText.trim()){
      alert("ê³ ë¯¼ì„ ì ì–´ì•¼ í•´ê²°í•´ì£¼ì§€!");
      return;
  }

  btn.disabled = true;
  btn.textContent = "ê³ ë¯¼ í•´ê²° ì¤‘...";

  setTimeout(() => { goNextPage(); }, 1500);

  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors", 
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name: userName, worry: worryText }),
  })
  .then(() => { goNextPage(); })
  .catch((error) => {
    console.error("Error:", error);
    goNextPage();
  });
}

// â˜…â˜…â˜… ëˆˆì¹˜ 100ë‹¨ ì´ë™ í•¨ìˆ˜ â˜…â˜…â˜…
function goNextPage(){
  if (isMoving) return; 
  isMoving = true;

  const text = document.getElementById("worryInput").value; // ì‚¬ìš©ìê°€ ì“´ ê¸€
  let min = 0;
  let max = 19; // ê¸°ë³¸ê°’: 0~19ë²ˆ (ì¼ë°˜ì ì¸ ìœ„ë¡œ/ì‘ì›)

  // í‚¤ì›Œë“œ ê²€ì‚¬ í•¨ìˆ˜ (ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ë‹¨ì–´ê°€ í•˜ë‚˜ë¼ë„ í¬í•¨ë˜ë©´ true)
  const hasKeyword = (list) => list.some(word => text.includes(word));

  // ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì¹´í…Œê³ ë¦¬ ê²°ì •
  if (hasKeyword(KEYWORDS.study)) {
      min = 20; max = 39; // í•™ì—… ê´€ë ¨ ë‹µë³€
  } 
  else if (hasKeyword(KEYWORDS.relation)) {
      min = 40; max = 59; // ê´€ê³„ ê´€ë ¨ ë‹µë³€
  } 
  else if (hasKeyword(KEYWORDS.food)) {
      min = 60; max = 79; // ìŒì‹ ê´€ë ¨ ë‹µë³€
  } 
  else if (hasKeyword(KEYWORDS.money)) {
      min = 80; max = 99; // ëˆ/ë¯¸ë˜ ê´€ë ¨ ë‹µë³€
  }
  
  // ì •í•´ì§„ ë²”ìœ„(min~max) ì•ˆì—ì„œ ëœë¤ìœ¼ë¡œ ë²ˆí˜¸ í•˜ë‚˜ ë½‘ê¸°
  const a = Math.floor(Math.random() * (max - min + 1)) + min;
  
  // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™!
  location.href = `answer.html?u=${u}&a=${a}`;
}
</script>
</body>
</html>
