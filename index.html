<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>보케샘의 고민 상담소</title>
<style>
body{margin:0;font-family:-apple-system;background:#f6f6f6;display:flex;justify-content:center}
.wrap{max-width:420px;width:100%;padding:24px;text-align:center}
h1{font-size:22px;margin-top:60px}
p{color:#666;margin:12px 0 32px}
textarea{width:100%;height:120px;border-radius:12px;border:1px solid #ccc;padding:12px;font-size:16px;resize:none;}
button{margin-top:24px;width:100%;padding:14px;font-size:16px;border:none;border-radius:14px;background:#000;color:#fff;cursor:pointer;}
button:disabled{background:#999;cursor:not-allowed;}
.small{margin-top:16px;font-size:12px;color:#999}
</style>
</head>
<body>
<div class="wrap">
  <h1 id="title"></h1>
  <p>고민있구나? 걱정마 샘이 해결함!</p>
  <textarea id="worryInput" placeholder="적어준 고민은 답변과 함께 저 우주로 날려보내니 걱정말라고!"></textarea>
  <button id="sendBtn" onclick="sendAndGo()">보케샘의 일타 고민해결 받기!</button>
  <div class="small">하루 한 번만 가능(신중필요)</div>
</div>

  <script>
const USERS=[
"연우","민준이","가윤이","동균이","서현이","주은이","현우",
"동국이","소윤이","시온이","시우","지연이","지민이","상현이","수아",
"인성이","다해","승훈이","윤지","주아","준희","지효","태호",
"현준이","서현이","채원이","윤하","인형이","병욱이","시윤이","준혁이",
"가현이","현우","지윤이"
];

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykDuVl_i-7yEwy3eSZaoc_2A4kShtI51tQxmMcwYofLjOv1ygzhHUR162egRNgu_Aq/exec";

// URL 파라미터 처리
const p = new URLSearchParams(location.search);
const u = parseInt(p.get("u"), 10) || 1;
const userName = USERS[u-1] || "방문자"; 

// 제목에 이름 표시
document.getElementById("title").textContent = `${userName}의 고민 접수!`;

function sendAndGo(){
  const worryText = document.getElementById("worryInput").value;
  const btn = document.getElementById("sendBtn");

  // 버튼 비활성화
  btn.disabled = true;
  btn.textContent = "고민 해결 중...";

  // 데이터 전송
  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors", 
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      name: userName,
      worry: worryText
    }),
  })
  .then(() => {
    goNextPage();
  })
  .catch((error) => {
    console.error("Error:", error);
    goNextPage();
  });
}

function goNextPage(){
  const a = Math.floor(Math.random()*100);
  location.href = `answer.html?u=${u}&a=${a}`;
}
</script>







